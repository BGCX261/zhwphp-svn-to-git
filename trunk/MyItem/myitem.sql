-- phpMyAdmin SQL Dump
-- version 2.10.3
-- http://www.phpmyadmin.net
-- 
-- 主机: localhost
-- 生成日期: 2010 年 04 月 23 日 01:07
-- 服务器版本: 5.0.51
-- PHP 版本: 5.2.6

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

-- 
-- 数据库: `myitem`
-- 

-- --------------------------------------------------------

-- 
-- 表的结构 `article`
-- 

CREATE TABLE `article` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) NOT NULL,
  `time` date NOT NULL,
  `title` varchar(50) NOT NULL,
  `content` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=49 ;

-- 
-- 导出表中的数据 `article`
-- 

INSERT INTO `article` VALUES (16, 3, '2010-04-13', 'sdf', '&lt;p&gt;\r\n	sdf&lt;/p&gt;\r\n');
INSERT INTO `article` VALUES (15, 3, '0000-00-00', 'sdf', '&lt;p&gt;\r\n	sdf&lt;/p&gt;\r\n');
INSERT INTO `article` VALUES (10, 3, '0000-00-00', 'sfsdf', '<p>\r\n	<span style="color: #00ff00"><strong><span style="font-family: 楷体_gb2312"><span style="font-size: 36px">asfdsadfasfd</span></span></strong></span></p>\r\n');
INSERT INTO `article` VALUES (13, 3, '0000-00-00', 'fsdfsdf', '<p>\r\n	sdfsdf</p>\r\n');
INSERT INTO `article` VALUES (25, 2, '2010-04-22', '关于PHP中操作MySQL数据库的一些要注意的问题', '<p>\r\n	１.分号的例外<br />\r\n	　对于MySQL，第一件你必须牢记的是它的每一行命令都是用分号(;)作为结束的，但&hellip;&hellip;没有完全绝对的事，在这儿也是一样，当一行MySQL被插入在PHP代码中时，最好把后面的分号省略掉，例如：<br />\r\n	mysql_query(&quot;INSERTINTOtablename(first_name,last_name)<br />\r\n	VALUES(&#39;$first_name&#39;,&#39;$last_name&#39;)<br />\r\n	&quot;);<br />\r\n	　这是因为PHP也是以分号作为一行的结束的，额外的分号有时会让PHP的语法分析器搞不明白，所以还是省略掉的好。在这种情况下，虽然省略了分号，但是PHP在执行MySQL命令时会自动的帮你加上的。<br />\r\n	　另外还有一个不要加分号的情况。当你想把要字段的竖者排列显示下来，而不是像通常的那样横着排列时，你可以用G来结束一行SQL语句，这时就用不上分号了，例如：<br />\r\n	SELECT*FROMPENPALSWHEREUSER_ID=1G</p>\r\n<div>\r\n	２.TEXT、DATE、和SET数据类型<br />\r\n	　MySQL数据表的字段必须有定义一个数据类型。这有大约25种选择，大部分都是直接明了的，就不多费口舌了。但有几个有必要提一下。<br />\r\n	　TEXT不是一种数据类型，虽然可能有些书上是这么说的。它实际上应该是&ldquo;LONGVARCHAR&rdquo;或者&ldquo;MEDIUMTEXT&rdquo;。<br />\r\n	　DATE数据类型的格式是YYYY-MM-DD，比如：1999-12-08。你可以很容易的用date函数来得到这种格式的当前系统时间：<br />\r\n	date(&quot;Y-m-d&quot;)<br />\r\n	　并且，在DATA数据类型之间可以作减法，得到相差的时间天数：<br />\r\n	$age=($current_date-$birthdate);<br />\r\n	　集合SET是一个有用的数据类型，它和枚举ENUM有点相似，只不过是SET能够保存多个值而ENUM只能保存一个值而已。而且，SET类型最多只能够有64个预定的值，而ENUM类型却能够处理最多65,535个预定义的值。而如果需要有大于64个值的集合，该怎么办呢？这时就需要定义多个集合来一起解决这个问题了。<br />\r\n	３.通配符<br />\r\n	　SQL的通配符有两种：&ldquo;*&rdquo;和&ldquo;%&rdquo;。分别用在不同的情况下。例如：如果你想看到数据库的所有内容，可以像这样来查询：<br />\r\n	SELECT*FROMdbnameWHEREUSER_IDLIKE&#39;%&#39;;<br />\r\n	　这儿，两个通配符都被用上了。他们表示相同的意思??都是用来匹配任何的字符串，但是他们用在不同的上下文中。&ldquo;*&rdquo;用来匹配字段名，而&ldquo;%&rdquo;用来匹配字段值。另外一个不容易引起注意的地方是&ldquo;%&rdquo;通配符需要和LIKE关键字一起使用。<br />\r\n	还有一个通配符，就是下划线&ldquo;_&rdquo;，它代表的意思和上面不同，是用来匹配任何单个的字符的。</div>\r\n<div>\r\n	４.NOTNULL和空记录<br />\r\n	　如果用户在没有填任何东西的情况下按了submit按钮，会怎样呢？如果你确实需要一个值，那么可以用客户端脚本或者服务器端脚本来进行数据验证，这一点在前面已经说过了。但是，在数据库中却是允许一些字段被空出来什么也不填。对此类纪录，MySQL将要为之执行一些事情：<br />\r\n	插入值NULL，这是缺省的操作。<br />\r\n	如果你在字段定义中为之声明了NOTNULL（在建立或者修改这个字段的时候），MySQL将把这个字段空出来什么东西也不填。<br />\r\n	对于一个ENUM枚举类型的字段，如果你为之声明了NOTNULL，MySQL将把枚举集的第一个值插入到字段中。也就是说，MySQL把枚举集的第一个值作为这个枚举类型的缺省值。<br />\r\n	　一个值为NULL的纪录和一个空纪录是有一些区别的。%通配符可以匹配空纪录，但是却不能匹配NULL纪录。在某些时候，这种区别会造成一些意想不到的后果。就我的经验而言，任何字段都应该声明为NOTNULL。这样下面的SELECT查询语句就能够正常运转了：<br />\r\n	if(!$CITY){$CITY=&quot;%&quot;;}<br />\r\n	$selectresult=mysql_query(&quot;SELECT*FROMdbname<br />\r\n	WHEREFIRST_NAME=&#39;柳&#39;<br />\r\n	ANDLAST_NAME=&#39;如风&#39;<br />\r\n	ANDCITYLIKE&#39;$CITY&#39;<br />\r\n	&quot;);<br />\r\n	　在第一行中，如果用户没有指定一个CITY值，那么就会用通配符%来代入CITY变量，这样搜索时就会把任何的CITY值都考虑进去，甚至包括那些CITY字段为空的纪录。<br />\r\n	　但是如果有一些纪录，它的CITY字段值是NULL，这时问题就出现了。上面的查询是不能够找到这些字段的。问题的一个解决办法可以是这样：<br />\r\n	if(!$CITY){$CITY=&quot;%&quot;;}<br />\r\n	$selectresult=mysql_query(&quot;SELECT*FROMdbname<br />\r\n	WHEREFIRST_NAME=&#39;柳&#39;<br />\r\n	ANDLAST_NAME=&#39;如风&#39;<br />\r\n	AND(CITYLIKE&#39;$CITY&#39;ORCITYISNULL)<br />\r\n	&quot;);<br />\r\n	　注意在搜索NULL时，必须用&ldquo;IS&rdquo;关键字，而LIKE时不会正常工作的。<br />\r\n	　在最后要提到的是，如果你在加入或者修改一个新的字段之前，数据库中已经有了一些记录了，这时新加入的字段在原来的纪录中的值，可能是NULL，也可能为空。这也算是MySQL的一个Bug吧，所以在这种情况下，使用SELECT查询要特别的小心。<br />\r\n	php002.cn|php零易网,|ThinkPHP|QeePHP/FleaPHP|CakePHP|Zend Framework<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (21, 1, '2010-04-22', 'DIV+CSS其实是web标准化', '<p>\r\n	总说要学习DIV+CSS<br />\r\n	现在学习了才知道，DIV+CSS这个缩写的最终含义就是web标准化</p>\r\n<div>\r\n	业界越来越关注DIV+CSS的标准化设计，大到各大门户网站，小到不计其数的个人网站，在Div+CSS标准化的影响下，网页设计人员已经把这一要求作为行业标准。那么什么是Div+CSS标准？Div+CSS的标准化设计到底有什么好处？</div>\r\n<div>\r\n	Div 全称 division 意为&ldquo;区分&rdquo;使用 DIV 的方法跟使用其他 tag 的方法一样。<br />\r\n	如果单独使用 DIV 而不加任何 CSS, 那么它在网页中的效果和使用<br />\r\n	是一样的。<br />\r\n	DIV本身就是容器性质的,你不但可以内嵌table还可以内嵌文本和其它的HTML代码</div>\r\n<div>\r\n	CSS是Cascading style Sheets的简称，中文译作&ldquo;层叠样式表单&rdquo;，在主页制作时采用CSS技术，可以有效地对页面的布局、字体、颜色、背景和其它效果实现更加精确的控制。只要对相应的代码做一些简单的修改，就可以改变同一页面的不同部分，或者页数不同的网页的外观和格式。网上冲浪无论你用Internet Explorer还是Netscape Navigator，几乎随时都在与CSS打交道，在网上没有使用过CSS的网页可能不好找。不管你用什么工具软件制作网页，都有在有意无意地使用CSS。用好CSS能使你的网页更加简炼，同样内容的网页，有的人做出来有几十KB，而高手做出来只有十几KB。</div>\r\n<div>\r\n	Div+CSS标准的优点:</div>\r\n<div>\r\n	1.大大缩减页面代码，提高页面浏览速度,缩减带宽成本;<br />\r\n	2.结构清晰，容易被搜索引擎搜索到，天生优化了seo<br />\r\n	3.缩短改版时间。只要简单的修改几个CSS文件就可以重新设计一个有成百上千页面的站点。<br />\r\n	4.强大的字体控制和排版能力。CSS控制字体的能力比糟糕的FONT标签好多了，有了CSS，我们不再需要用FONT标签或者透明的1 px GIF图片来控制标题，改变字体颜色，字体样式等等。<br />\r\n	5.CSS非常容易编写。你可以象写html代码一样轻松地编写CSS。<br />\r\n	6.提高易用性。使用CSS可以结构化HTML，例如： 标签只用来控制段落，heading标签只用来控制标题，table标签只用来表现格式化的数据等等。你可以增加更多的用户而不需要建立独立的版本。<br />\r\n	7.可以一次设计，随处发布。你的设计不仅仅用于web浏览器，也可以发布在其他设备上，比如PowerPoint。<br />\r\n	8.更好的控制页面布局。不用多说。<br />\r\n	9.表现和内容相分离。将设计部分剥离出来放在一个独立样式文件中，你可以减少未来网页无效的可能。<br />\r\n	10.更方便搜索引擎的搜索。用只包含结构化内容的HTML代替嵌套的标签，搜索引擎将更有效地搜索到你的内容，并可能给你一个较高的评价(ranking)。<br />\r\n	11.Table 布局灵活性不大，你只能遵循 table tr td 的格式。而div 你可以 div ul li 也可以 ol li 还可以 ul li &hellip;&hellip;但标准语法最好有序的写。<br />\r\n	12.另外如果你不是javascrput的高手，你可以不必去写ID，只用class就可以。当客户端程序员写完程序，需要调整时候，你可以在利用他的ID进行控制。<br />\r\n	13.Table 中布局中，垃圾代码会很多，一些修饰的样式及布局的代码混合一起，很不利于直观。而Div 更能体现样式和结构相分离，结构的重构性强。<br />\r\n	14.在几乎所有的浏览器上都可以使用。<br />\r\n	15.以前一些非得通过图片转换实现的功能，现在只要用CSS就可以轻松实现，从而更快地下载页面。<br />\r\n	16.使页面的字体变得更漂亮，更容易编排，使页面真正赏心悦目。<br />\r\n	17.你可以轻松地控制页面的布局 。<br />\r\n	18.你可以将许多网页的风格格式同时更新，不用再一页一页地更新了。你可以将站点上所有的网页风格都使用一个CSS文件进行控制，只要修改这个CSS文件中相应的行，那么整个站点的所有页面都会随之发生变动。</div>');
INSERT INTO `article` VALUES (22, 1, '2010-04-22', 'flash调用:让Flash调用符合web标准 ', '<p>\r\n	最近在研究web标准，目前取得一些进展，在参考国外一些优秀网站后，我找到了让flash调用符合web标准的方法，解决了浏览器对flash的影响。　　首先建立一个js文件flash.js，内容为：<br />\r\n	function i(ur,w,h){<br />\r\n	document.write(&#39;&lt;object classid=&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot; codebase=&quot;<a href="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version">http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version</a><br />\r\n	=6,0,29,0&quot; width=&quot;&#39;+w+&#39;&quot; height=&quot;&#39;+h+&#39;&quot;&gt; &#39;);<br />\r\n	document.write(&#39;&lt;param name=&quot;movie&quot; value=&quot;&#39; + ur + &#39;&quot;&gt;&#39;);<br />\r\n	document.write(&#39;&lt;param name=&quot;quality&quot; value=&quot;high&quot;&gt; &#39;);<br />\r\n	document.write(&#39;&lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&gt; &#39;);<br />\r\n	document.write(&#39;&lt;param name=&quot;menu&quot; value=&quot;false&quot;&gt; &#39;);<br />\r\n	document.write(&#39;&lt;embed src=&quot;&#39; + ur + &#39;&quot; quality=&quot;high&quot; pluginspage=&quot;<a href="http://www.macromedia.com/go/getflashplayer">http://www.macromedia.com/go/getflashplayer</a>&quot; type=&quot;application/x-shockwave-flash&quot; width=&quot;&#39;+w+&#39;&quot; height=&quot;&#39;+h+&#39;&quot;&gt;&lt;/embed&gt; &#39;);<br />\r\n	document.write(&#39;&lt;/object&gt; &#39;);<br />\r\n	}　　ur是文件路径，w，h为flash文件尺寸，wmode为设置flash背景为透明，menu为控制flash右键菜单，js里面这些参数不需要修改。<br />\r\n	　　页面调用部份代码：<br />\r\n	　　js调用：<br />\r\n	&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot; src=&quot;flash.js&quot;&gt;&lt;/script&gt;　　在放flash的位置写的代码如下：</p>\r\n<div>\r\n	&lt;script language=&quot;JavaScript&quot; type=&quot;text/javascript&quot;&gt;i(&#39;flash.swf&#39;,&#39;615&#39;,&#39;310&#39;);&lt;/script&gt;　　注意把代码里面的flash.swf换成你自己文件的路径，615，310是宽和高，自己按照需要修改</div>\r\n<div>\r\n	<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (23, 1, '2010-04-22', '网页设计技巧系列之文本排版', '<p>\r\n	我们在做网页的时候会发现：自己画的图也不错，自己做的布局也很精致，做的图标也很漂亮，第一眼看起来都觉得很漂亮，但是看看就觉得不舒服，也不清楚为什么&hellip;&hellip;<br />\r\n	这里我告诉你，也许就是你的排版出现问题了。页面排版不合理产生的视觉效果会让读者的眼睛产生的疲劳感，基本的毛病在于&ldquo;字间距太挤或太宽&rdquo;、&ldquo;行距太小或太大&rdquo;、&ldquo;段距太少或太多&rdquo;、&ldquo;每行字数太多或太少&rdquo;等这几个常见因素。大家可以从下面的图示和讲解内容中看出差别，同时我会给大家一个相对比较好的参数供大家参考。当然设计本来就不要太过拘泥，我所提供的都是一般性的提议，不同网站不同对待，不要过于拘泥我所给大家的一些参数。<br />\r\n	下面我们用图例来说明。大家仔细看下面第一张图，前三个图是行距的问题，后两个是字数的问题。<br />\r\n	行距的问题</p>\r\n<div>\r\n	第一个太挤了，都粘在一起了，这样眼睛在看这个文本的时候会需要花点时间去分辨，这样的排版会让读者看得很累。很不舒服。大家看一下自己手头上所做文本的是不是太挤了，如果是那就改一下吧!<br />\r\n	第二个是比较适中的，由于每行分得很清楚，这样看起来有很强的识别性。<br />\r\n	第三个是比较宽的，松了一点，这样看起来也很清楚，但是当你的文章不是一两行而是十几行与几十行的时候你就会觉得文章的连贯性产生了很严重的脱节，一般排版不会越过两个字体高度(2em)。<br />\r\n	字数的问题<br />\r\n	下面两个图是字数的问题。第四个每行文字太长，这样看起来头要摇来摇去，这样读者更容易显得很累。因为要不断的转动头，或是让眼球不断的左右摆动。最舒服的方式就是读者一眼看上去就能把一行看完，不然从行末到下一行行首也会形成断裂感。<br />\r\n	而下面的又太扁了，这样看起来也不是很舒服。由于在不断的换行阅读，眼球也会觉得不舒服。推荐的最好字数是： 不大于45个字母，不大于30个汉字。</div>\r\n<div>\r\n	下面我们再看一幅图，聊聊段落的距离问题。</div>\r\n<div>\r\n	段落的距离</div>\r\n<div>\r\n	下面这幅图是关于段距的。<br />\r\n	上面一个是比较合适的，这样的把段落分开了，让读者觉得文章并不是很多很难读。<br />\r\n	如果不把段落当一回事，任其自然那么就会如下面一样，两段成为一段。<br />\r\n	大家可以看出哪种更好，如果是几十段合在一起，那么这个文章就很少有人能读下去了!</div>\r\n<div>\r\n	<br />\r\n	现在经典论坛中的行距已经重新设定过了，现在发布长篇的文章就不会觉得糊在一起了，并且在链接上加了下划钱，对于色盲或色弱的朋友也容易<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (24, 1, '2010-04-22', '网页版面布局的原理', '<p>\r\n	设计首页的第一步是设计版面布局。<br />\r\n	就象传统的报刊杂志编辑一样，我们将网页看作一张报纸，一本杂志来进行排版布局。虽然动态网页技术的发展使得我们开始趋向于学习场景编剧，但是固定的网页版面设计基础依然是必须学习和掌握的。它们的基本原理是共通的，你可以领会要点，举一反三。<br />\r\n	版面指的是浏览器看到的完整的一个页面（可以包含框架和层）。因为每个人的显示器分辨率不同，所以同一个页面的大小可能出现640*480像素,800*600像素,1024*768像素等不同尺寸。<br />\r\n	布局，就是以最适合浏览的方式将图片和文字排放在页面的不同位置。你可能注意到：&ldquo;最适合&rdquo;是一个不确定的形容词，什么才是最适合的呢？抱歉的是阿捷不能也不可能给您一个完整的正确的答案。就好比有人希望知道成功的秘诀是什么，成功者只能建议您用什么方法，什么途径才能最容易获得成功，而不可能有一步成功的&quot;秘诀&quot;告诉您。<br />\r\n	我们在设计思考系列文章第四篇讲过站点整体的创意，版面布局也是一个创意的问题，但要比站点整体的创意容易，有规律的多。让我们先来了解一下版面布局的步骤：<br />\r\n	一.草案<br />\r\n	新建页面就象一张白纸，没有任何表格，框架和约定俗成的东西，你可以尽可能的发挥你的想象力，将你想到的&quot;景象&quot;画上去(我们建议您用一张白纸和一支铅笔，当然用作图软件photoshop等也可以)。这属于创造阶段，不讲究细腻工整，不必考虑细节功能，只以粗陋的线条勾画出创意的轮廓即可。尽你的可能多画几张，最后选定一个满意的作为继续创作的脚本。<br />\r\n	二.粗略布局<br />\r\n	在草案的基础上，将你确定需要放置的功能模块安排到页面上。(注：功能模块我们在&quot;首页设计-引子&quot;中提过，主要包含网站标志,主菜单,新闻,搜索,友情链接,广告条,邮件列表,计数器,版权信息等)。注意，这里我们必须遵循突出重点、平衡谐调的原则，将网站标志，主菜单等最重要的模块放在最显眼，最突出的位置，然后在考虑次要模块的排放。<br />\r\n	三.定案<br />\r\n	将粗略布局精细化，具体化。（靠你的智慧和经验，旁敲侧击多方联想，才能作出具有创意的布局。）<br />\r\n	在布局过程中，我们可以遵循的原则有：<br />\r\n	1、正常平衡---亦称&quot;匀称&quot;。多指左右、上下对照形式，主要强调秩序，能达到安定诚实、信赖的效果。<br />\r\n	2、异常平衡---即非对照形式，但也要平衡和韵律，当然都是不均整的，此种布局能达到强调性、不安性、高注目性的效果。<br />\r\n	3、对比---所谓对比，不仅利用色彩、色调等技巧来作表现，在内容上也可涉及古与今、新与旧、贫与富等对比。<br />\r\n	4、凝视---所谓凝视是利用页面中人物视线，使浏览者仿照跟随的心理，以达到注视页面的效果，一般多用明星凝视状。<br />\r\n	5、空白---空白有两种作用，一方面对其他网站表示突出卓越，另一方面也表示网页品位的优越感，这种表现方法对体显网页的格调十分有效。<br />\r\n	6、尽量用图片解说---此法对不能用语言说服、或用语言无法表达的情感，特别有效。图片解说的内容，可以传达给浏览者的更多的心理因素。<br />\r\n	以上的设计原则，虽然枯燥，但是我们如果能领会并活用到页面布局里，效果就大不一样了。比如，<br />\r\n	○网页的白色背景太虚，则可以加些色快；<br />\r\n	○版面零散，可以用线条和符号串联；<br />\r\n	○左面文字过多，右面则可以插一张图片保持平衡；<br />\r\n	○表格太规矩，可以改用导角试试。<br />\r\n	经过不断的尝试和推敲，你的网页一定会亮丽起来的哦:)<br />\r\n	看看我们经常用到的版面布局形式：<br />\r\n	1.&quot;T&quot;结构布局。所谓&quot;T&quot;结构。就是指页面顶部为横条网站标志+广告条，下方左面为主菜单，右面显示内容的布局，因为菜单条背景教深，整体效果类似英文字母&quot;T&quot;,所以我们称之为&quot;T&quot;形布局。这是网页设计中用的最广返的一种布局方式。(图略)这种布局的优点是页面结构清晰，主次分明。是初学者最容易上手的布局方法。缺点是规矩呆板，如果细节色彩上不注意，很容易让人&quot;看之无味&quot;。<br />\r\n	2.&quot;口&quot;型布局。这是一个象形的说法，就是页面一般上下各有一个广告条，左面是主菜单，右面放友情连接等，中间是主要内容。(图略)这种布局的优点是充分利用版面，信息量大(我的主页首页即属于这种布局)。缺点是页面拥挤，不够灵活。也有将四边空出，只用中间的窗口型设计，例如网易壁纸站。<br />\r\n	3.&quot;三&quot;型布局。这种布局多用于国外站点，国内用的不多。特点是页面上横向两条色块，将页面整体分割为四部分，色块中大多放广告条。<br />\r\n	4.对称对比布局。顾名思义，采取左右或者上下对称的布局，一半深色，一半浅色，一般用于设计型站点。优点是视觉冲击力强，缺点是将两部分有机的结合比较困难。<br />\r\n	5.POP布局。POP引自广告术语，就是指页面布局象一张宣传海报，以一张精美图片作为页面的设计中心。常用于时尚类站点，比如ELLE.com。优点显而易见：漂亮吸引人。缺点就是速度慢。作为版面布局还是值得借鉴的。<br />\r\n	以上总结了目前网络上常见的布局，其实还有许许多多别具一格的布局，关键在于你的创意和设计了。对于版面布局的技巧，这里提供四个建议，您可以自己推敲：<br />\r\n	1.加强视觉效果<br />\r\n	2.加强文案的可视度和可读性<br />\r\n	3.统一感的视觉<br />\r\n	4.新鲜和个性是布局的最高境界<br />\r\n	&nbsp;</p>\r\n');
INSERT INTO `article` VALUES (26, 2, '2010-04-22', '云计算百科', '<p>\r\n	<br />\r\n	　　&nbsp; &nbsp;&nbsp; &nbsp;云计算是依靠强大的计算能力，使得成千上万的终端用户不担心所使用的计算技术和接入的方式等都能够进行有效的依靠网络连接起来的硬件平台的计算能力来实施多种应用。<br />\r\n	　　云计算是现在技术行业的行话。不仅google，IBM，microsoft和yahoo这些大公司是云计算的拥趸，一批规模较小的公司也同样如此。<br />\r\n	　　你可能会疑惑，云计算是个什么概念？简单的说，它意味着计算资源的获得&mdash;&mdash;处理，存储，信息传递，数据库之类&mdash;&mdash;来自你自己的四堵墙之外的某个地方，并且你只需为你使用的那部分资源付费。<br />\r\n	　　这是个没有具体定义的词组，被广泛地用于网络上的很多事物。salesforce.com现在称它为云计算应用&mdash;&mdash;毕竟，公司们利用它存储他们的销售数据，而不是用他们自己的系统来做这些事情。facebook，同样也是一个云计算平台，因为软件开发人员为它开发应用并在这个平台上分发这些应用。<br />\r\n	　　那么就有作为基础构造的云计算，公司们藉此提供他们的服务器，存储和其它的技术给那些可以付费的人。在以前这也被叫做网格或效用计算，因为你在需要的时候才去接入它，就像你使用电力网络一样，并且只为你使用的那一部分付费。在计算机技术的早期，它也被称作时间分享。<br />\r\n	　　所以，这个概念本身不是个新东西。&ldquo;真的，我们没有创造存储，数据库，计算机或数据库功能，&rdquo;Andy Jassy，Amazon网络服务的资深副总裁说。他的部门开始于2006年，是这一轮按账单付费的云计算基础架构服务提供者里的先行者。然而Amazon，并没有把自己的云计算称之为云计算，除了把其中的一项服务命名为弹性计算云。<br />\r\n	　　（纽约时报利用AMAZON提供的网络服务在网络上提供了1851年到1922年间的报纸版本。）<br />\r\n	　　在有了高速的internet接入和近乎无限的存储空间，并且处理能力已经可以集结到一起，还会有什么的新东西出现？<br />\r\n	　　一个展示云计算能力的生动例子来自于Animoto，这是一个成立于纽约仅18个月的公司，允许客户上传他们的图片和音乐并提供自动生成定制的基于网络的视频展示服务；这样人们就可以和他们的朋友分享这些视频。Animoto为注册了这项服务的人们提供免费的视频展示，今年春天的的早些时间每天约有5000个访客在使用这项服务。<br />\r\n	　　然后，在四月中旬，facebook的用户对这个应用产生的兴趣出现了一个小小的高潮，三天时间里有约75万人在ANIMOTO网站上进行了注册。在高峰期，每小时约有两万五千人使用Animoto的服务。<br />\r\n	　　为了填补服务器的需求缺口，这家公司本来需要在现有基础上对服务器扩容100倍，30岁的Animoto共同创办人，首席技术官Stevie Clifton说。但Stevie Clifton先生和其他的创办人既没有资金进行如此规模的服务器扩容，也没有技术能力&mdash;&mdash;和兴趣&mdash;&mdash;来管理这些服务器。<br />\r\n	　　所以，他们开始和Rightscale，一家位于加利福尼亚圣塔芭芭拉的云计算服务供应商合作，这家公司为Amazon的云计算设计应用软件。通过这个合作，Animoto就只需为应付三天的流量激增付费，并且不需购买或配置任何新的服务器。它把负载交给amazon承担，一台服务器一小时的费用只有约10美分，包含了带宽，存储和相关服务带来的一些边际成本。<br />\r\n	&nbsp;</p>\r\n');
INSERT INTO `article` VALUES (27, 2, '2010-04-22', 'PHP在网站开发中的一些优势', '<p>\r\n	&nbsp;<br />\r\n	PHP在网站开发中的一些优势</p>\r\n<p>\r\n	在多数WEB开发者眼中，ASP和JSP都被认为是领跑者，而PHP却被认为是个弱小的&ldquo;挣扎者&rdquo;，或者说它是一门被贬低为业余者才使用的语言，不值得参与企业WEB开发的竞争。在我看来，PHP没有被当作竞争者的理由是评论者缺乏对它的了解，而且也不了解用于WEB开发的其他操作系统。和一些观点相反，Windows不再占有WEB<br />\r\n	虚拟主机<br />\r\n	服务市场的最大份额，我猜想它在WEB开发这一领域里也在被摧城拔寨。<br />\r\n	在企业开发里为什么没有PHP？<br />\r\n	很显然，PHP被认为落后ASP和JSP太多，以至于它是没有什么用的，但是这恰恰与事实不符。PHP本身就是一门强大的语言。它事实上在每个发行版的LINUX上都有，在Mac OS X上也有。获取开发和使用PHP代码的构件（building-block）工具和软件都是免费的。用于开发PHP应用程序的商业集成开发环境（commercial integrated development environments，IDES）也可以找到&mdash;&mdash;这样的工具有Komodo（它运行在LINUX和Windows上）和Zend Studio（这个应用程序能够运行在任何带有JAVA运行环境的操作系统上）。你几乎可以在每个WEB<br />\r\n	虚拟主机<br />\r\n	上运行由PHP建立的网站，而不要考虑服务器所运行的是什么操作系统，这一事实让PHP更加具有吸引力。<br />\r\n	PHP能够提供什么？<br />\r\n	先把PHP周围有什么忘掉一会儿，而考虑一下PHP自身能够提供什么。它是一门强健的服务器端语言，能够提供相当多的功能，而且能够迅速地为页面提供服务。<br />\r\n	容易使用<br />\r\n	使用C或者Perl或者具有类似风格和句法的另一种语言的任何用户都能够很快上手PHP。尽管它是设计用在WEB上的，但是它也能够作为命令行语言使用。你正在编写的WEB应用程序需要每个小时或者每天执行一次某些代码吗？使用cron或者类似的计划安排管理器，你可以计划安排PHP代码在你希望的时候执行，使用普通的命令解释脚本或者批处理文件就能够执行这样的代码。不需要自动调用浏览器就能够查看专门的网页，从而执行你的事件，也没有必要依赖来访者的点击来告诉你的系统：特定的代码需要在特定的时候被执行。PHP在这一领域可扩展性的事实是绝对具有吸引力的。<br />\r\n	PHP的好处<br />\r\n	我不是JSP或者ASP的老手，在此我也不想贬低这些语言。相反，我会把注意力放在PHP的好处上。<br />\r\n	本地化<br />\r\n	PHP让你能够为网站的访问者提供本地化的服务。当用户点击进入网站的时候，网站会根据他们浏览器的设置自动地以其母语向其提供页面。要实现这一点不需要使用用于语言翻译的烦杂文件，而是使用和本地化的C程序所具有的相同能力，通过一个叫做gettext的系统实现的。如果被请求的语言文件存在，那么用户所看到的文本就是其母语；如果语言文件不存在，那么文本就是缺省的英语或者其他任何你所指定的语言。许多本地化的UNIX应用程序都将gettext作为标准，它让第三方的翻译变得轻而易举。<br />\r\n	轻易地使用命令行<br />\r\n	PHP支持在需要的地方设置和执行命令行程序。使用标准的UNIX diff工具，它能够生成错误最后一次修改同要使用电子邮件发送到错误的所有者的当前注释之间的不同。PHP代码对在系统上所编写的两个文件执行diff，将其输出作为输入，再生成一个要发送的电子邮件。这封电子邮件是通过PHP自己来发送的。<br />\r\n	其他好处<br />\r\n	上面的只是我在自己程序里所用到的强大功能中的两个，而还其他的功能。例如，你可以：<br />\r\n	即时创建简单的Flash动画。即时创建PDF文档。使用高级数学功能，以及面向对象的编程技术。读取和写入到本地和IMAP邮箱。<br />\r\n	在PHP里就可以使用任何标准的Internet协议。想要编写基于PHP的FTP、WEB或者新闻客户端？没有问题！只使用PHP你就完全能够编写出使用标准TCP/IP套接字的客户端和服务器，并以此创建自己的协议。<br />\r\n	实现对加密的支持，以及对各种数据库服务器的支持。<br />\r\n	缺乏远见的评论<br />\r\n	我觉得，那些寻找顶级WEB开发语言而排除掉PHP的人是极其短见的。我使用PHP编写代码已经有很多年了，无论是像错误追踪系统这样的高级功能，还是简单地重复使用页眉和页脚这样的普通功能，我都使用PHP编写过。我用PHP编写过半静态的页面，也编写过全功能的多媒体演示。我不是唯一一个使用PHP的人。如果PHP不值得引起注意，如果它只是小儿科或者爱好者的语言，那它为什么会是在WEB开发上成长最快的语言呢？如果它没有ASP或者JSP那么强大，那么它为什么会被用在流量巨大WEB网站上？例如Yahoo，据说它就是由PHP建成的。<br />\r\n	开发人员习惯用熟悉的产品<br />\r\n	我敢肯定，ASP 和JSP有它们各自的强项，但是我相信人们是用它们不是因为它们能够提供比PHP更加强大的功能，而是因为人们已经了解了它们，并希望以自己习惯的方法编写代码。排除PHP只能表示对这一语言的无知</p>\r\n<div>\r\n	&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (28, 2, '2010-04-22', 'web标准的网站开发流程', '<p>\r\n	web标准的网站开发流程<br />\r\n	很久以来，网站开发过程中，最大的问题是沟通：<br />\r\n	前台与后台，项目经理与项目实施人员， 项目经理和客户，都苦于良好的沟通方式。我觉得问题的根源就在于传统的网站开发方法，说白了，就是非标准的开发方式导致的沟通的困难。<br />\r\n	具体地说，一个网站开发小组，通常要配备一下人员：<br />\r\n	网站总体策划师，网页设计师（美工），网站制作，程序员。看似分工明确，却往往效率低下，原因在于网站开发本身就没有实现内容、结构、表现、行为的分离，却把人员分工分的如此的明确，这本身就是人力资源运用的败笔：根本没有可能实现&ldquo;各司其职&rdquo;，又怎么会有良好的效率保证？<br />\r\n	web标准究竟有何意义？<br />\r\n	由此看来标准带来的不仅仅是技术上的统一规范，它处处体现出人文关怀的意味（508条便是明证），更重要的是，它极力要改变的是网站从业人员的思路，是适应现代社会发展分工需要的规范。<br />\r\n	现在，我们尝试着用web标准来指导我们的网站开发流程，会是什么样子？<br />\r\n	我不得不在此提出一个新的网站开发职位：网站内容结构设计师。web标准强调内容的结构化，认为网站是建立在内容的基础上，没有内容谈不上表现。由此看来，内容结构的设计的重要性不言而喻。遗憾的是目前的网站开发团队并没有这样一个职位，或是说这样的职位总被其他的职位兼顾着（一般都是网站策划师），但我这里所言的网站结构设计师并不仅限于现在策划师所作的。<br />\r\n	目前的策划师往往仅仅是策划出网站风格、栏目、功能，但我这里谈及的网站结构设计师所作的工作并不仅限于此，他所要做的是将客户提供的信息归类，将信息内容结构化，使客户提供的整个文档具备高度的可读化（就像组织一本书，要分好章节、项目、段落等等）。这样的职位要求从业人员有较高的逻辑思维能力和语文基础，并熟知xhtml中的结构化标签，可利用这些标签 最终形成内容高度结构化的网页。这个工作是整个网站构建的基础。<br />\r\n	有了这样一个网站内容设计师，我们整个的工作就简单而明了了。我们需要以下人员：<br />\r\n	网站项目经理：负责与客户沟通，采集客户的需求，确定网站的风格、栏目 、功能，制定网站策划书、指派监督任务，与项目实施人员沟通协调，测试网站，最终促使项目顺利完成。<br />\r\n	网站内容结构设计师：根据项目经理提供的项目材料，生成高度结构化的文档，并形成初始网页（不含任何样式）。<br />\r\n	网页设计师（美工）：根据项目经理提供的策划书和内容结构师制作的初始网页， 进行网页效果图的设计，包括首页、栏目页、内容页、功能页等。</p>\r\n<div>\r\n	网站样式设计师（网站制作）：参照网页设计师的效果图以及内容设计师的初始网页，编写网页样式，须保证样式的高效简洁。最终实现符合效果图的网页。</div>\r\n<div>\r\n	网站程序员：根据项目经理的网站功能设计策划，编制实现功能的后台程序。需要在页面输出的，就将页面的静态内容换成动态输出的。要求了解web标准。<br />\r\n	这样的人员分配，保证了每个项目人员都能专心的发挥本身的长处，内容设计师只要具备良好的逻辑思维和语文基础，不需要去考虑网页的表现；网页设计师只要是个平面设计高手，具有良好的形象思维，良好的美学观念，良好的艺术创造力，不需要繁琐的网页设计知识，毕竟网页设计也要有一定的逻辑思维，这对专业的艺术设计人员来说是可怕而费时的；网站样式设计师（网站制作），只要照着效果图实现效果就可以了，工作性质类似于工匠，要求有细心仔细的工作作风，只需要了解样式的编写，不需要再去考虑创作上的问题，某种意义上说也是一种解脱。<br />\r\n	由此看来，在应用标准进行设计的过程中，能够顺利地实现项目的明确分工，的确是有利于开发效率的。<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (29, 1, '2010-04-22', '网页布局排版的决定因素是什么？', '<p>\r\n	网络上形形色色的网站，网页布局排版各有差异（当然除了完全copy），但为何布局排版存在差异呢，不同布局排版的目的是什么呢？是否有什么依据可循呢？若有，这些被遵守的依据又是基于什么考虑的呢？<br />\r\n	在项目经历过程中，经常看到这样的情形：<br />\r\n	领导：我们要做一个&hellip;<br />\r\n	负责人：好的。<br />\r\n	负责人：你们每人设计*套效果图出来；<br />\r\n	设计人员：好的&hellip;<br />\r\n	&nbsp;等到设计人员（指视觉设计人员，下同）把页面效果图设计好了之后，我们针对效果图进行讨论和筛选确定，以确定最终采用哪套设计方案，这个时候大家各抒己见，领导也根据自己看法对不同作品进行筛选，但这个过程中最经常出现的结果就是：每个方案各有不同，包括布局排版、配色方案、整体风格等，但每个作品都不尽人意之处，最后根据讨论结果确定下了一个方案并提供修改意见，项目进入开发阶段。<br />\r\n	这个流程本身没什么问题，只要能保证大家选择的方案执行后能得到大家想要的结果即可，但可悲的是我们经常无法得到满意的结果，包括栏目设置缺乏考虑造成运营不善，页面布局不合理造成用户体验下降等等；出现这样问题原因在于：在这个流程中我们陷入了到底该选择哪套方案、陷入了对不同方案的对比甄别中，而我们却忘记了为什么需要这样的方案，我们最原始的需求和出发点是什么？<br />\r\n	今天重点谈谈在这样流程中关于布局排版的问题。<br />\r\n	&nbsp;首先，网页排版布局不应该是设计人员为了美化页面而拼凑排列的，就像经常有视觉设计师说&ldquo;这个地方看起来很空，我得找个*放上去..&rdquo;一样，我认为：基于页面美化和丰富界面内容的网页布局排版都是不可取的，因此，布局排版体现的是一个网页中各个模块的重要程度和客户可能的关注重点，合理的布局排版应该且必须承担把《我们想要传达的信息》快速高效地提供给用户的重任。<br />\r\n	&nbsp;那么，网页布局排版的决定因素是什么？<br />\r\n	1.&nbsp; 网页排版布局的内容来源于需求：网页中是要展示&ldquo;新闻动态&rdquo;、&ldquo;供应信息&rdquo;，还是要展示&ldquo;招标投标&rdquo;、&ldquo;用户投票&rdquo;这个要依据项目最原始的需求和出发点，这个页面要满足用户什么需求就要求他比较具备什么功能模块。<br />\r\n	2.&nbsp; 网页排版布局的形式决定于模块的重要程度：一个页面存在多个功能模块，它们的展现形式应该如何，就要考虑各个模块的重要程度，重要信息、重要功能模块&ldquo;靠上靠左&rdquo;呈现，这是因为这些地方从位置上讲比较有吸引眼球的优势，要做到&ldquo;突出重点&rdquo;。<br />\r\n	3.&nbsp; 网页排版布局必须首先尊重用户习惯：上面说了&ldquo;网页排版布局的形式决定于模块的重要程度&rdquo;但是不是重要的模块就必须&ldquo;靠上靠左&rdquo;呈现呢？</p>\r\n<div>\r\n	未必！</div>\r\n<div>\r\n	因为&ldquo;靠上靠左&rdquo;这是一个相对的概念，就是说要尽量做到重要的信息放在客户容易发现的位置上，但不同用户使用习惯上是有差异的，这就要求我们要在尊重用户习惯基础上来做好页面排版布局，就拿中文网站页面和英文网站页面来说，一个页面里面要呈现的功能模块相同（模块重要性也一样），但这个时候除了遵守&ldquo;网页排版布局的形式决定于模块的重要程度&rdquo;外，应该首先考虑中文用户和英文用户浏览习惯上的差异进行有差别的排版布局了。<br />\r\n	&nbsp;一句话：网页布局排版不能太随意！<br />\r\n	建议：在产品开发过程中尽量规范产品开发流程，网页布局排版应该交给交互设计人员来做，而不是视觉设计人员，如果视觉设计人员就是交互设计人员，那也要多加思量该网页布局排版的依据。<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (30, 1, '2010-04-22', '用户体验设计应该适应用户不应改变用户', '<p>\r\n	设计无所不在，但大多数企业不知道如何使用它。现代设计进入中国大概是二十多年的时间，而在国外，尤其在美国在欧洲，大概有一百年的历史。二十多年前中国是没有人讲用户体验这个词的。那个时代讲究技术和美术的结合，叫技术美学。一个产品，只要功能好，样式好看，就OK。二十多年后，这个概念在大多数企业还没有发生改变，大多企业的高层也不理解什么叫设计，认为设计师就是一个美工。设计师本身也没有去提标准，自身的思维也只是停留在美工这个角度上。设计的潜力，远远没有发挥出来。<br />\r\n	设计师的本质并不光是把PPT做得很漂亮。在企业中，设计师应该拥有独特解决问题的能力，可以去模拟未来发展的事情。<br />\r\n	比如，在50年代的时候，在美国问任何一个人，家电设计应是什么样子？所有人都会说，家电必须放在一个柜子里面，必须跟家具是一样的。而日本人却发现，其实家电应该有它自己独特的一个东西，它有金属的外观，很轻巧，很好用。日本人的设计理念，使他们一举占领了市场。这说明，设计师要做一些创新的东西，用户的一些潜在的思维慢慢会被引导。<br />\r\n	设计师比较特别并经常使用的三种作法：观察、模拟和讲故事。<br />\r\n	通过观察用户的行为，发现用户有一些什么困难，有什么潜在的机会，去发生改变，发现灵感，灵感变成产品，最终给用户去用。而不是传统的市场调研的方法，去问卷调查，把猜想可能是A和B的做法，只是让用户选择，然后确认一下。<br />\r\n	模拟就是把潜在的、新的产品模拟出来，用户在使用过程中，设计师进一步观察，发现问题，触发灵感，去改造概念。这样做出来的产品上线之后，会更好、更接近于用户的需求。<br />\r\n	设计师还可以讲很好的故事，去说服公司高层去做一些新的产品。<br />\r\n	设计思维是一种以人为本的创新。从人的体验的角度去考虑，怎么去创造人的价值。设计本应首先考虑用户，其次是商业，而大多数企业恰恰相反。先考虑怎么赚钱，怎么去增加流量，而真正没有从用户的角度去思考。<br />\r\n	用户体验&mdash;&mdash;创新三动力之一<br />\r\n	商业创新通常有三大动力：商业模式、技术、用户体验。<br />\r\n	戴尔实现一种商业模式的创新。他把电脑完全用直销的模式去卖，所以价格可以做得很低，成为世界上第一大电脑销售商。<br />\r\n	Intel完成了技术的创新，每8个月可以让CPU速度增加一倍，价格减一半，所以他统治着电脑领域几十年。<br />\r\n	用户体验则是第三种创新，这种创新可以给企业带来巨大的发展。苹果五年前推出IPOD时，市场上已经有很多MP3播放器产品。IPOD本身没有什么特殊的功能，也就是播放，倒歌，但是苹果在用户体验方面做了很好的创新，东西非常好用，很简单。IPOD要加功能，可以加得很多比如说要删除一个歌，比如可以买歌买电影。但当时苹果要节约成本，用户也不需要。IPOD满足了用户简易、简单的体验。视觉上，IP0D白色的透明材料，在那个年代已经把用户体验做到了极致，也因此吸引了大批顾客。<br />\r\n	用户体验设计管理金字塔：<br />\r\n	用户体验设计目标是什么？最重要的是要让产品有用，这个有用是指用户的需求。苹果90年代出来第一款PDA手机，叫牛顿，是非常失败的一个案例。在那个年代，其实很多人并没有PDA的需求，苹果把90％以上的投资放到他1％的市场份额上，所以失败势在必然。<br />\r\n	其次是易用，这非常关键。不容易使用的产品，也是没用的。市场上手机有一百五十多种品牌，每一个手机有一两百种功能，当用户买到这个手机的时候，他不知道怎么去用，一百多个功能他真的可能用的就五、六个功能。当他不理解这个产品对他有什么用，他可能就不会花钱去买这个手机。产品要让用户一看就知道怎么去用，而不要去读说明书。这也是设计的一个方向。<br />\r\n	设计的下一个方向就是友好。最早的时候，加入百度联盟，百度批准后，发这样一个邮件：百度已经批准你加入百度的联盟。批准，这个语调让人非常非常难受。所以现在说：祝贺你成为百度联盟的会员。文字上的这种感觉也是用户体验的一个细节。<br />\r\n	视觉设计的目的其实是要传递一种信息，是让产品产生一种吸引力。是这种吸引力让用户觉得这个产品可爱。&ldquo;苹果&rdquo;这个产品其实就有这样一个概念，就是能够让用户在视觉上受到吸引，爱上这个产品。视觉能创造出用户黏度。<br />\r\n	前四者做好，就融会贯通上升到品牌。这个时候去做市场推广，可以做很好的事情。前四个基础没做好，推广越多，用户用得不好，他会马上走，而且永远不会再来。他还会告诉另外一个人说这个东西很难用。<br />\r\n	用户体验设计经常犯的错误是，直接开发直接上线。很多人说，互联网作为一个实验室，我一上线就可以知道结 恕Ｕ獾比灰彩且桓稣 返睦砟睢５ 窃谏舷咧 坝刑 嗟拇砦螅 敲淳突岽蟠蟮赜跋焓绿 峋帧Ｒ豢 嫉氖焙蚓湍芎茏既返刈鞒鲆恍┡卸希 鞒鲆恍┤&cap;幔 诨チ 飧鍪笛槭依铮 拍芄蛔龅酶 谩?lt;/p&gt;<br />\r\n	用户需求是根本，但用户需求不一定是功能<br />\r\n	百度在半年前推出空间，从功能上来说它比较其他同类产品没有什么特别大的变化，就是三个最基本的功能：上传文章，上传图片，交友。这三个功能，所有博客都有做，而且有更多的功能。但是那个时候，大部分的博客，不管是CSP还是门户网站，都不能解决一个问题：速度。性能很不稳定，文章上传了，可能登录就进不去了，可能上传的东西没了。其实用户最基本的需求，就是速度和稳定性。百度虽然才做博客，但百度有很大的平台，有很多的服务器，有很大的流量，完全可以从稳定性和速度上把这两个用户体验做好，其次再做一些功能。很难用的产品注定会失败的，这个是非常关键的。<br />\r\n	百度的搜索，可以用五个字归纳：快准全新稳。每一个字可以分解成很多小项，跟所有的搜索引擎PK，每一个字后面都代表着一种用户体验。一个博客一推出来就有几百个链接，几十种功能，很多网站说我可以这样做，国外都是这样做的，像MYSPACE做得很成功，我就把它照搬过来。但是很多中国用户其实跟美国用户是不一样的，中国70％的人是30岁以下的，以娱乐为主，而不是信息搜索为主。而美国是70％是30岁以上的，非常成熟和理性的这一类。很多功能拿到中国，中国人是不会用的。这就是你增加越多的功能，你就越增加产品的复杂性。<br />\r\n	怎么完成易用性这个任务<br />\r\n	百度就有一个专门做易用性这样的团队，每天请各种用户来做各种各样的调研。<br />\r\n	特别提出，不要忽视文字的力量。当年的EBAY，注册一个EBAY的帐户，第一步第二步第三步。第三步，原来是这样说的：&ldquo;你只要在你的邮件确认一下你就成功了&rdquo;。这样一句话，很长。但是用户不是一个一个字去读，他是扫描，他一眼扫过去，他的意向可能就是成功了。把成功两个字记住他就走掉了，不会再去确认这个邮件了。EBAY后来改成五个大字，叫&ldquo;快要成功了&rdquo;。五个大字，非常大。用户一看，我没有成功，我要做什么事，下面写邮件。所以几个字就让EBAY提升了10％到20％的注册率，相当于每天给他带来一百万的最终价值。<br />\r\n	怎么能让用户爱上你的产品<br />\r\n	可以通过视觉去改善，去提供一种感觉。这就是为什么百度和Google要做节日LOGO的原因，因为搜索这个产品也是太普通了。节日的时候做做LOGO，用户产生一种感觉、情感，黏度会更好。这一类的东西我们都可以从视觉上去提高。<br />\r\n	百度节日LOGO：<br />\r\n	用户体验是一个多背景的梯形团队<br />\r\n	为什么多背景呢？首先你要了解用户的需求，这不是很容易的事情。先要从社会学，人类学，心理学角度大量研究。然后需要技术人员去模拟UI的技术或者是后台的技术。视觉体验，又要从工业设计这个角度去看。这些事都要不同背景不同类型的人去做。同时还要分工程师，产品经理。甚至一些公司高层、市场部的人都要在一起工作。为什么说是梯型呢？因为第一要了解各个专业的人，他们知道些什么东西，你怎么跟他们合作；第二就是更专业。两方面都要去共同发展。这样整个联系在一起，就变成一个完整团队。<br />\r\n	另外一点很重要，UE设计并非由用户体验部来设计。百度成立用户体验部，是因为用户体验部可以协助其他部门更专业、更系统地去做用户体验这件事。<br />\r\n	百度每天几亿的流量，稍微做一点改变，就可以得到很大的提升。比如说百度搜索结果的摘要，你加两个字或者是减两个字可能就影响到一百万的收入。百度首页上之前的一句话叫&ldquo;把百度设为首页&rdquo;，最早是&ldquo;设百度为首页&rdquo;，就改一个字，每天会增加几千个以上的点击量。用户体验部要做的是指挥，而不是独自做专业的事，要让所有的人一起来思考问题，是跟其他部门在一起工作，提供给其他部门更专业更系统的用户体验信息，协助所有的人员来做这个事情。<br />\r\n	关注用户体验的细节<br />\r\n	用户体验调研远不应只是简单的你问我答。细节往往藏于用户说、做、想、感觉等各个具体行为之中&mdash;&mdash;<br />\r\n	说：传统的市场调研方式，设计一个问卷，问用户喜不喜欢这个产品，或者给用户几种案，问用户喜欢哪一种，这就是说。<br />\r\n	做：这是比说更好的数据。看用户做什么。甚至不要说，从他的行为已经发现了很多问题。人类学，设计学，心理学都是做这件事。人类学家费晓东，专门在中国的一个农村观察了60年。60年的变化，解放前，解放后，观察某个人的行为过程，他就得到这个人行为演变的规律。这种调研方式最近十年来已经被引进到设计里面去&mdash;&mdash;设计一些场景，让用户去用，然后去看他做些什么。<br />\r\n	想：用户到底在想什么？他看到一个产品，上面可能功能很多，他可能脑瓜去想我不会用，我不知道怎么用，但是这只是他的想法，没有表达出来。怎么能够了解这种想法呢？让他一边想一边去说。激发他去说。比如为一个网页做调研的时候，就让用户想这个链接认为会到什么地方去。用户认为的地方可能跟网页点过去的初级设计页面是不一样的，这就形成一个用户的数据。<br />\r\n	感觉：一个网站是很土还是很酷还是很贴心？这种感觉有一百种形容词，怎么能够把它真正发掘出来？这是细分人视觉的很重要的一个调研方式。<br />\r\n	脚：用户是用他的脚来投票的，非常简单的道理，你的产品不好，他就走掉了。<br />\r\n	从细节中洞察<br />\r\n	很多人做了很多调研，形成很多数据。但是问题在于没有形成洞察。就是你不知道从这个数据里面去挖出一些信息形成设计标准。<br />\r\n	怎么从数据中得到一种洞察？这也不是一件很容易的事情。比如说在厨房里做调研，可能有两种，一种是看主人怎么去用电饭煲，这个过程，可能得到的结果是一个更好的电饭煲。这是针对产品的调研。另外一种是花两个小时，观察主人从切菜到洗菜，到煮菜，到吃完饭，怎么去洗这些碗，这整个过程，发现各种各样存在的问题，也得到一个结论，这个结果是一个更好的，新一代的厨房用品，而这个跟电饭煲可能没有关系。<br />\r\n	跨国公司为什么在中国容易做不好<br />\r\n	很多大型跨国公司在海外市场都会遇上挫折，也是细节所决定。<br />\r\n	NBA非常重视中国市场。他们把所有NBA的页面、新闻、各种各样的数据全部翻译成中文给中国用户去用，他们也请一些球星来，在中国办各种活动。<br />\r\n	但是他们忽略了什么？比如说用户要看一场球赛，自然需要一个赛程表，NBA给的是：第一，美国的电视台，对中国的用户，美国电视台没有任何意义；第二，美国的时间，中国时间是半夜。所以仅仅把所有东西翻译过来是不够的，要针对中国需求，很实在的去发现一些他们需要的东西，让他真正去用。NBA可用性上面有问题，更不要说易用性的问题。很多跨国公司，只是把外面产品汉化过来，而没有去考虑细节问题。这跟技术没有关系，跟很有钱也没有关系。就是这些细节做不好，用户用脚投票，走掉了，不会再来了。<br />\r\n	前馈与反馈<br />\r\n	上线之前百度要做调研，去发现用户自己没有说出来的一种需求，这就叫前馈。有一家公司叫OXO，他们发现当时所有的人家，厨房用具的把手抓起来都很不舒服，不是很圆滑，是金属的，抓起来手感不好，于是OXO把所有的厨房用具的手柄都做得很大，塑胶的，螺纹的，抓着很舒服。OXO的这种&ldquo;把手&rdquo;申请了专利，别人卖20美分刮苹果刀这类的小东西，他们就可以卖五美金。<br />\r\n	出一个产品给用户用，用户发邮件给你，或者他点击，或者他告诉你这个产品好不好用。这是反馈。有一个酒店，他们发现很多商务人员去酒店的时候，经常要在大堂里开一个小会议，因为房间里不够大。大堂并不是给他们开这种小会用的，酒店就去专门调查这些人的需求，做一些模拟的环境，让大堂迅速可以变成几个小会议中心，所有的商务人士，都往里面挤，这家酒店就把这个市场抓住了。<br />\r\n	先做减法再做加法<br />\r\n	国外的东西百度不会照搬过来，百度空间就三个基本需求，写文章，放照片，交友。其他的功能如留言版、视频什么的以后慢慢加上去，加一个看一个的效果，看点击量，看用户反馈，喜欢就再往上加。稳定性，速度，是非常最关键的。别的根据用户需求加减。<br />\r\n	结构化地整合信息<br />\r\n	为什么做MP3搜索？因为百度发现搜索TOP，前十位，永远都有MP3。做这样一个搜索很自然。就像EBAY当年卖汽车一样，发现很多人已经在其他网站里面卖汽车的，我做肯定会成功的，因为已有庞大的用户基础。互联网其实是信息的整合，我们就是在把不同类别的信息整合起来，这也就是一种垂直搜索的模式。<br />\r\n	维护用户真实选择的结果<br />\r\n	MP3 页面中&ldquo;MP3榜单家庭&rdquo;榜单不放在首页。如果把榜单放在首页，用户自然去点击，点击越多越不真实。百度把它隐藏起来，完全是真实数据做出来的。所以很多唱片公司以百度的榜单来作为他们专辑或者选歌手的一个量化标准，这成了他们市场的一个标杆。<br />\r\n	弥补缺省，创造资源<br />\r\n	&ldquo;百度知道&rdquo;推出来一年多时间，已经解决了一千多万个问题。为什么做&ldquo;知道&rdquo;呢？第一，很多信息在网络中是没有的。第二，很多人喜欢用智能语言来提问，比如说鸡蛋不应该跟什么放在一起。用户想用关键词搜索的时候，往往并不知道用什么关键词来查找想要的信息。第三，很多关键词搜索结果往往大相径庭，比如说搜索&ldquo;苹果&rdquo;，出来的结果可能是水果也可能是电脑。搜索引擎没法判断用户的真实意图是什么，所以正确答案埋没在几千万个答案里面，用户不知道真正的答案。<br />\r\n	&ldquo;百度知道&rdquo;推出后，一切变得非常简单。只要提出任何一个问题，五分钟之内，一定会有人给你回答。每天知道可以解决将近五万个问题，可以想像，两天就可以看到一本《十万个为什么》。而每一个答案，通过投票，最佳答案就沉淀在里面，成为网络上搜索的结果。所以百度知道是搜索的一个非常好的补充。<br />\r\n	创造工具，更要创造规则<br />\r\n	如果要建立一个搜索社区，不仅仅是设计工具，还要设计规则。<br />\r\n	比如积分制度、专家团。如百度知道，有人会问，用户为什么要给你回答问题，能得到什么好处呢？而社区的用户讲究的不是达到多少现实利益，更多的是成就感。给用户奖励积分，评选最佳答案，用户回答问题分数提高，成就感很好，晚上不睡觉也必须要回答几十个问题。这种感觉就是一种规则，就是我们创造一种社区的规则。所以规则和工具很重要，能够让社区有良性的发展。<br />\r\n	不去干扰、阻挡交流<br />\r\n	百度贴吧之所以能够发展壮大，关键是不用注册，不用找分类。你只要输入任何一个词，一点搜索，你就可以到目标区里面讨论，没有门槛的设计非常重要。贴吧的目的是让用户去交流，注册用户不重要，分类也不重要，不要去干扰，去阻挡他们进入这个讨论区。<br />\r\n	关注用户需求，量多成产品<br />\r\n	为什么要做音乐掌门人？因为很多人已经在贴吧都讨论，不管是摇滚歌曲还是歌手都有。这些信息跟用户的行为有关，积到一定的量，用户需求明显，产品自然诞生。百度百科也是一样，很多人在知道里面去讨论，说某个词不懂，类似情况达到一定量，百度就关注到了用户这个需求，百科诞生。&ldquo;某个词&rdquo;发展到现在，估计已经有六七十万词条，不断地积累。这是开放的辞典，就是任何字，任何词条都可以不断去改，总是有几十个人在一起去编同一类词，所以用户可以更方便的找到准确的信息。<br />\r\n	适应用户，而不是去改变用户<br />\r\n	&ldquo;百度空间，稳定快速，先减后加。这是去适应用户的过程，而不是说要去改变用户，用户的习惯是没有办法改变的。<br />\r\n	2006年百度交给华尔街的年报上，封面是一针一线，封底是《清明上河图》。专注一针一线的细节，就是一副宏伟的《清明上河图》&mdash;&mdash;这就是提升用户体验设计的真正力量。<br />\r\n	&nbsp;</p>\r\n');
INSERT INTO `article` VALUES (31, 1, '2010-04-22', '色彩原来可以这样－－色彩心理', '<p>\r\n	色彩的物质性心理错觉<br />\r\n	色彩的直接心理效应来自色彩的物理光刺激对人的生理发生的直接影响。心理学家对此曾做过许多实验。他们发现，在红色环境中，人的脉搏会加快，血压有所升高，情绪兴奋冲动。而处在蓝色环境中，脉搏会减缓，情绪也较沉静。有的科学家发现，颜色能影响脑电波，脑电波对红色反应是警觉，对蓝色的反应是放松。自19世纪中叶以后，心理学已从哲学转入科学的范畴，心理学家注重实验所验证的色彩心理的效果。不少色彩理论中都对此作过专门的介绍，这些经验向我们明确地肯定了色彩对人心理的影响。<br />\r\n	冷色与暖色是依据心理错觉对色彩的物理性分类，对于颜色的物质性印象，大致由冷暖两个色系产生。波长长的红光和橙、黄色光，本身有暖和感，以次光照射到任何色都会有暖和感。相反，波长短的紫色光、蓝色光、绿色光，有寒冷的感觉。夏日，我们关掉室内的白炽灯，打开日光灯，就会有一种变量双的感觉。颜料也是如此，在冷食或冷的饮料包装上使用冷色，视觉上会引起你对这些食物冰冷的感觉。冬日，把卧室的窗帘换成暖色，就会增加室内的暖和感。<br />\r\n	以上的冷暖感觉，并非来自物理上的真实温度，而是与我们的视觉与心理联想有关。总的来说，人们在日常生活中既需要暖色，又需要冷色，在色彩的表现上也是如此。<br />\r\n	冷色与暖色除去给我们温度上的不同感觉以外，还会带来其它的一些感受，例如，重量感、湿度感等。比方说，暖色偏重，冷色偏轻；暖色有密度强的感觉，冷色有稀薄的感觉；两者相比较，冷色的透明感更强，暖色则透明感较弱；冷色显得湿润，暖色显得干燥；冷色又很远的感觉，暖色则有迫近感。一般说来，在狭窄的空间中，若想使它变得宽敞，应该使用明亮的冷调。由于暖色有前进感，冷色有后退感，可在细长的空间中的两壁涂以暖色，近处的两壁涂以冷色，空间就会从心理上感到更接近方形。<br />\r\n	除去寒暖色系具有明显的心理区别以外，色彩的明度与纯度也会引起对色彩物理印象的错觉。一般来说，颜色的重量感主要取决于色彩的明度，暗色给人以重的感觉，明色给人以轻的感觉。纯度与明度的变化给人以色彩软硬的印象，如淡的亮色使人觉得柔软，暗的纯色则有强硬的感觉。<br />\r\n	色彩原来可以这样－－颜色表情<br />\r\n	色彩本身是没有灵魂的，它只是一种物理现象，但人们却能感受到色彩的情感，这是因为人们长期生活在一个色彩的世界中，积累着许多视觉经验，一旦知觉经验与外来色彩刺激发生一定的呼应时，就会在人的心理上引出某种情绪。<br />\r\n	无论有彩色的色还是无彩色的色，都有自己的表情特征。每一种色相，当它的纯度和明度发生变化，或者处于不同的颜色搭配关系时，颜色的表情也就随之变化了。因此，要想说出各种颜色的表情特征，就想要说出世界上每个人的性格特征那样困难，然而对典型的性格作些描述，总还是有趣并可能的。<br />\r\n	红色<br />\r\n	红色是强有力的色彩，是热烈、冲动的色彩。约翰伊顿教授描绘了受不同色彩刺激的红色。他说：在深红的底子上，红色平静下来，热度在熄灭着；在蓝绿色底子上，红色就像炽烈燃烧的火焰；在黄绿色底子上，红色变成一种冒失的、莽撞的闯入者，激烈而又寻常；在橙色的底子上，红色似乎被郁积着，暗淡而无生命，好像焦干了似的。<br />\r\n	橙色<br />\r\n	橙色的波长仅次于红色，因此它也具有长波长导致的特征：使脉搏加速，并有温度升高的感受。橙色是十分活泼的光辉色彩，是暖色系中最温暖的色彩，它使我们联想到金色的秋天，丰硕的果实，因此是一种富足的、快乐而幸福的色彩。<br />\r\n	橙色稍稍混入黑色 或白色 ，会成为一种稳重、含蓄有明快的暖色，但混入较多的黑色后，就成为一种烧焦的色，橙色中加入较多的白色会带有一种甜腻的味道 。橙色与蓝色的搭配，构成了最响亮、最欢快的色彩。</p>\r\n<div>\r\n	黄色<br />\r\n	黄色是亮度最高的色，在高明度下能够保持很强的纯度。黄色的灿烂、辉煌，有着太阳般的光辉，因此象征着照亮黑暗的智慧之光；黄色有着金色的光芒，因此又象征着财富和权利，它是骄傲的色彩。黑色或紫色的衬托可以使黄色达到力量无限扩大的强度。白色是吞没黄色的色彩，淡淡的粉红色也可以像美丽的少女一样将黄色这骄傲的王子征服。<br />\r\n	黄色最不能承受黑色或白色的侵蚀，这两个色只要稍微的渗入，黄色即刻失去光辉。<br />\r\n	绿色<br />\r\n	鲜艳的绿色非常美丽，优雅，特别是用现代化学技术技术创造的最纯的绿色，是很漂亮的的色。绿色很宽容、大度，无论蓝色还是黄色的渗入，仍旧十分美丽。黄绿色单纯，年青；蓝绿色清秀、豁达。含灰的绿色，也是一种宁静、平和的色彩，就像暮色中的森林或晨雾中的田野那样。<br />\r\n	蓝色<br />\r\n	蓝色是博大的色彩，天空和大海着最辽阔的景色都呈蔚蓝色，无论深蓝色还是淡蓝色，都会使我们联想到无垠的宇宙或流动的大气，因此，蓝色也是永恒的象征。蓝色是最冷的色，使人们联想到冰川上的蓝色投影。蓝色在纯净的情况下并不代表感情上的冷漠，它只不过代表一种平静、理智与纯净而已。真正令人的情感缩到冷酷悲哀的色，是那些被弄混浊的蓝色。<br />\r\n	紫色<br />\r\n	波长最短的可见光是紫色波。通常，我们会觉得有很多紫色，因为红色加少许蓝色或蓝色加少许红色都会明显地呈紫味。所以很难确定标准的紫色。约翰伊顿对紫色做过这样的描述：紫色是非知觉的色，神秘，给人印象深刻，有时给人以压迫感，并且因对比的不同，时而富有威胁性，时而又富有鼓舞性。当紫色以色域出现时，便可能明显产生恐怖感，在倾向于紫红色时更是如此。歌德说：&ldquo;这类色光投射到一副景色上，就暗示着世界末日的恐怖。&rdquo;<br />\r\n	　　紫色时象征虔诚的色相，当紫色深化暗化时，有时蒙昧迷信的象征。潜伏的大灾难就常从暗紫色中突然爆发出来，一旦紫色被淡化，当光明与理解照亮了蒙昧的虔诚之色时，优美可爱的晕色就会使我们心醉。<br />\r\n	　　用紫色表现混乱、死亡和兴奋，用蓝紫色表现孤独与献身，用红紫色表现神圣的爱和精神的统辖领域&mdash;&mdash;简而言之，这就是紫色色带的一些表现价值。<br />\r\n	　　伊顿教授的对紫色的描述，的确能给我们以启示，它似乎是色环上最消极的色彩。尽管它不想蓝色那样冷，但红色的渗入使它显得复杂、矛盾。它处于冷暖之间游离不定的状态，加上它的低明度的性质，也许就构成了这一色彩在心理上引起的消极感。与黄色不同，紫色可以容纳许多淡化的层次，一个暗的纯紫色只要加入少量的白色，就会成为一种十分优美、柔和的色彩。随着白色的不断加入，也就不断的产生出许多层次的淡紫色，而每一层次的淡紫色，都显得很柔美、动人。<br />\r\n	黑、白、灰色<br />\r\n	我们曾经说过，无彩色的在心理上与有彩色具有同样的价值。黑色与白色时对色彩的最后抽象，代表色彩世界的阴极和阳极。太极图案就是黑白两色的循环形式来表现宇宙永恒的运动的。黑白所具有的抽象表现力以及神秘感，似乎能超越任何色彩的深度。康丁斯基认为，黑色意味着空无，像太阳的毁灭，像永恒的沉默，没有未来，失去希望。而白色的沉默不是死亡，而是有无尽的可能性。黑白两色是极端对立的色，然而有时候又令我们感到它们之间有着令人难以言状的共性。白色与黑色都可以表达对死亡的恐惧和悲哀，都具有不可超越的虚幻和无限的精神，黑白又总是以对方的存在显示自身的力量。它们似乎是整个色彩世界的主宰。<br />\r\n	　　在色彩世界中，灰色恐怕是最被动的色彩了，它是彻底的中性色，依靠邻近的色彩获得生命，灰色一旦靠近鲜艳的暖色，就会显出冷静的品格；若靠近冷色，则变为温和的暖灰色。与其用&ldquo;休止符&rdquo;这样的字眼来称呼黑色，不如把它用在灰色上，因为无论黑白的混合、不色的混合、全色的混合，最终都导致中性灰色。灰色意味着一切色彩对比的消失，是视觉上最安稳的休息点。然而，人眼是不能长久地、无线扩大地注视着灰色的，因为无休止的休息意味着死亡。<br />\r\n	　　色彩的表情在更多的情况下是通过对比来表达的，有时色彩的对比五彩斑斓、耀眼夺目，显得华丽，有时对比在纯度上含蓄、明度上稳重，又显得朴实无华。创造什么样的色彩才能表达所需要的感情，完全依赖于自己的感觉、经验以及想象力，没有什么固定的格式。<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (32, 1, '2010-04-22', '网页布局中使用数学中的模数精确布局', '<p>\r\n	在设计中可以使用许多数学公式，比如常用的黄金分割比就是其中之一。在网页设计布局中，我们也能通过精密的计算来获得理想的排版比例，本文将介绍使用数学中的&ldquo;模数&rdquo;来计算网页布局大小，从而获得更为合理的布局。<br />\r\n	在IT工业中，内置标准、国际标准、国家标准才是真正意义的规范、而在应用领域（包括Web应用的开发）的开发中，标准是各自为政乱七八糟的，微软如果不考虑市场和经济利益也不是不吊这些标准的。我不得不汗一个。<br />\r\n	二、模数网页设计中的应用<br />\r\n	好了，鄙视完小儿科的网页设计，我们来谈谈&ldquo;模数&rdquo;在网页设计中的用途。<br />\r\n	（一）网页设计中的尺寸单位<br />\r\n	网页设计中的尺寸单位有那么几个：em&nbsp;&nbsp; ex&nbsp;&nbsp; px&nbsp;&nbsp; pt&nbsp;&nbsp; pc&nbsp; in&nbsp;&nbsp; cm&nbsp;&nbsp; mm&nbsp;&nbsp; %<br />\r\n	最常用的就是px（像素），因为这个单位与图片单位可以互通，所以常用。</p>\r\n<div>\r\n	（二）网页设计中的常用模数<br />\r\n	（1）最常用的是100、10、5的倍数<br />\r\n	比如分栏的时候，满宽式950px，左栏式180px，栏与栏之间的间距是10px、15px、20px</div>\r\n<div>\r\n	（2）模数要尽量取整或末位为偶数<br />\r\n	这里要在提一下模数中有个概念就是，不满足常用模数的，位数尽量要用偶数，为的避免歧义和好记。还有个道理是，一律取偶数，那么按组件的偶数量组合顺序，叠加结果一定是偶数，末尾加再加个组件一定是奇数了，这样好判断是否有错。<br />\r\n	比如你的图片宽是231px，为啥不舍1取整为230px；<br />\r\n	再比如你的图片高时237px，你可以取235px、236px、238px</div>\r\n<div>\r\n	（3）使用模数的好处&mdash;&mdash;轻松获得秩序美<br />\r\n	这个世界上什么是美？是秩序。看看元素晶体、看看飘落到你手中尚为融化的雪花、看看人类的基因螺旋结构，这些微观世界的东西，凝练了美得本源。而自然界、动物界、乃至宇宙星系，由于其包含了杂志和不断地衰减变化，这种&ldquo;美&rdquo;只是表象。<br />\r\n	人之所以是人，就是在一直探索事物的本源。并不断提炼还原美的本质。在中世纪人们迷恋于几何，在现代人们充分将其提高到工业设计中。工业设计是以规范标准和计算设计为基础的，升华成一套追求完美的秩序。形成秩序的模数，是一个递增量，这个增量可以是倍数、方根、幂、圆周率、素数、或以个方程式等等。而倍数恰恰是形成秩序的一种最简单的方法。所以在工业设计中，尤其是建设设计中大量运用了倍数来充当模数。<br />\r\n	现在我们有了简单的倍数类模数，那么这个模数又是怎么把美体现出来的呢？<br />\r\n	你说我感觉不到啊。答对了，模数美的确是人无法直接一下感受到的。因为这种美不仅仅体现在感官上，还体现在设计制作开发过程中，它不仅提高了制作效率，减小了莫名其妙的累计误差，还把一种整体的设计美蕴含在整体作品中，它的美是整体美和局部美一种相互转换。更直白点，你会在网页中感受到一种工业设计的&ldquo;精致&rdquo;和&ldquo;用心&rdquo;，反过来说，一个界面中的模块之间的间距或某模块四个边界与其内容的间隔，一会是8px，一会是12px，一般用户一定会在潜意识中感觉不精致，因为设计者没有用心，没有用模数把秩序美设计进去。<br />\r\n	有多少UI设计师不懂得啥是模数呢？<br />\r\n	有多少UI设计师因为不用模数而使整个网站缺乏设计美呢？<br />\r\n	有多少UI设计师即便是在局部或某组建用了符合秩序的倍数，但没有在整页布局和整站中是使用统一的模数呢？<br />\r\n	用你的眼睛细心观察，用放大镜去研究，用心灵去感受，你就知道你的设计师是什么水平了。</div>\r\n<div>\r\n	（4）不被模数所束缚<br />\r\n	上面一直说模数要用倍数，要用偶数。要活血活用啊，一旦秩序美的追求与效率和规范冲突，哪就放弃模数。比如即成的国际标准小logo图片的尺寸是88*31px，你非得为了符合模数而不遵循国际通用标准而改成88*30px吗？<br />\r\n	题外话，除了模数，IT工业还有其内置的一套标准，我也懒得去管他，比如图片和头像大小，有其一套特殊的模数，16*6、24*24、32*32、48*48、64*64、128*128，你要是非得破坏这个标准而改成15*15、25*25、030*30、50*50、65*65、130*130，我就真无语了。<br />\r\n	咦，我发现paidai的头像，居然是50*50px，呵呵。看来表现层不必非得拘泥于模数。<br />\r\n	设计美就是这么简单，你必须用计算器来布局！<br />\r\n	&nbsp;</div>\r\n');
INSERT INTO `article` VALUES (33, 1, '2010-04-22', '浅谈我们该怎么设计好我们的网站？', '<p>\r\n	我们知道一个网站能不能成功虽然不取决于最初做的怎么样，但是，一个好的开始就是成功的一半，所以，我们的网站要想获得成功，网站设计是十分重要的。好的网站设计会让我们的网站达到数半功倍的效果。所以，作为网站站长的我们在网站没有上线之前，我们一定要对我们的网站做好设计，以免到时候我们改来改去，这不仅对用户不友好，对搜索引擎也是十分不友好的，搞不好我们的网站还有可能被搜索引擎处罚。那我们该怎么设计好我们的网站呢？<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1. 网站的细节色彩，形状的改动在整体上会给访客带来视觉上的冲击，比如蓝色、绿色等会给人一种平静的氛围。在设计网站时可以通过适当的混合颜色、图形、图片，创造出强烈的氛围和感受，将会给访客产生深刻的印像。<br />\r\n	　　2. 网站设计上要有层次感，每样商品的放置都要遵循一定的顺序指导访客，不要让访客为了寻找一个产品而点遍整个网站。避免混乱，可以通过链接、导航菜单指导访客。在页面上提示访客，以便他们仅通过几次点击就可以买到产品和服务。通过降低访客点击的次数，可有效的降低访客的挫折感，提高从访客到会员的转化率。<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.就是要以网站内容为主(内容为王)确保网站内容以有效的方式排序。如果仅仅将注意力放在网站的视觉感受上，从而忽视了内容，那么访客转化为忠实的会员必定不会很高，如果想访客购买产品或是服务，则需要简洁的舒服内容和立体化的信息结构和通俗易懂的内容。<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4. 把自己变成浏览者中的一员，访客到你的网站来，他想要的是什么?网站不仅仅要满足自己的需求，更重要的是需要满足访客的需求。要想知道哪些是访客想要的，可以做个问卷调查，根据调查来的结果来调整网站设计来满足访客的需求和自己的需求。<br />\r\n	　　5.要让网站尽量看上去简约大方，这才是最终的目标。比如：比如 Google、Flickr 和 Blogger等都是很简约美观的。当加入每一个特征时，请考虑访客的需要!把它当做你的目标吧。<br />\r\n	　　最后我们来说说什么是网站设计？<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 网站设计的实质内容包括：<br />\r\n	　　01 明确内容<br />\r\n	　　如果你想成为一个网站设计者，并正想建一个网站的话，首先应该考虑网站的内容，包括网站功能和你的用户需要什么。你的整个设计都应该围绕这些方面来进行。<br />\r\n	　　02 抓住用户<br />\r\n	　　如果用户不能够迅速地进入你的网站，或操作不便捷，网站设计就是失败的。不要让用户失望而转向你的对手的网站。<br />\r\n	　　03 网站设计优化内容<br />\r\n	　　内容是核心。大约在两年以前，企业网站就像一本广告册子，更槽糕的是，网站使用了大量的图片，似乎要几个世纪才能下载完。 Chanels网站在设计的某些方面是成功的，但是内容太贫乏，并且要花很长时间才能找到所要的东西，因此不能算是一个成功的网站。<br />\r\n	　　04 快速下载<br />\r\n	　　没有什么比要花很长时间下载页面更槽糕的了。<br />\r\n	　　05 网站升级<br />\r\n	　　时刻注意网站的运行状况。性能很好的主机随着访问人数的增加，可能会运行缓慢。但是，如果你不想失去访问者的话，一定要仔细计划好你的升级计划。<br />\r\n	　　06 网站设计坚持基本原则<br />\r\n	　　即使你不懂HTML语言，你只需购买一个有版权的所见即所得的网页设计工具，如Adobe PageMill 或 Microsoft FrontPage Express，就可以创建一个看起来很合理的网站。但是，在设计时，这些软件包虽然不需要HTML，却使网站速度下降。 为了成功地设计网站，你必须理解HTML是如何工作的。大多数的网站设计者建议网络新手应从有关HTML的书中去寻找答案，用Notepad制作网页。<br />\r\n	　　07 学习HTML<br />\r\n	　　用HTML设计网站，可以控制设计的整个过程。但是，如果你仅仅是网站设计的新手，你应该寻找一个允许修改HTML的软件包。HomeSite4是一个很好的Web设计工具。在设计过程中，HomeSite4能帮助你学习HTML。它还允许你切换到所见即所得的模式，以便你在把网站发送到Web之前，预览你的网站。<br />\r\n	&nbsp;</p>\r\n');
INSERT INTO `article` VALUES (34, 2, '2010-04-22', 'jQuery工作原理解析', '<p>\r\n	jQuery的开篇声明里有一段非常重要的话：jQuery是为了改变javascript的编码方式而设计的。从这段话可以看出jQuery本身 并不是UI组件库或其他的一般AJAX类库。jQuery改变javascript编码方式！ 那么它是如何实现它的声明的呢？这里，用以下的一段简短的使用流</p>\r\n<p>\r\n	<span class="top11">&nbsp;</span><span class="top11">jQuery的开篇声明里有一段非常重要的话：jQuery是为了改变javascript的编码方式而设计的。从这段话可以看出jQuery本身 并不是UI组件库或其他的一般AJAX类库。jQuery改变javascript编码方式！</span><span class="top11">那么它是如何实现它的声明的呢？这里，用以下的一段简短的使用流程：</span></p>\r\n<p>\r\n	<span class="top11">那么它是如何实现它的声明的呢？这里，用以下的一段简短的使用流程：</span></p>\r\n<p>\r\n	<span class="top11">1、查找(创建)jQuery对象：$(&quot;selector&quot;);</span></p>\r\n<p>\r\n	<span class="top11">2、调用jQuery对象的方法完成我们需要完成的工作：$(&quot;selector&quot;).doOurWork();</span></p>\r\n<p>\r\n	<span class="top11">好了，jQuery就是以这种可以说是最简单的编码逻辑来改变javascript编码方式的。这两个步骤是jQuery的编码逻辑核心！</span></p>\r\n<p>\r\n	<span class="top11">要实现这种简洁编码方式，创建jQuery对象这一环节至关重要。因此，jQuery的dom元素查找能力相当强悍。此外，jQuery对象的方法 肯定是有限的，有限的方法满足不了日益增长各有所需的要求，所以，必须提供jQuery对象方法的扩展能力。</span></p>\r\n<p>\r\n	<span class="top11">强悍的dom元素查找能力，以及随心所欲的方法扩展，这两点正是jQuery的核心所在！</span></p>\r\n<p>\r\n	<span class="top11">来一个简单的示例，来说明jQuery是如何工作的：</span></p>\r\n<p>\r\n	<span class="top11">&nbsp;</span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table align="center" border="0" cellpadding="6" cellspacing="0" style="border-right: rgb(0,153,204) 1px solid; table-layout: fixed; border-top: rgb(0,153,204) 1px solid; border-left: rgb(0,153,204) 1px solid; border-bottom: rgb(0,153,204) 1px solid" width="95%">\r\n	<tbody>\r\n		<tr>\r\n			<td bgcolor="#ddedfb" style="word-wrap: break-word">\r\n				<span class="top11">&lt; !DOCTYPE html PUBLIC &rdquo;-//W3C//DTD XHTML 1.0 Transitional//EN&rdquo; &rdquo;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&rdquo;&gt;<br />\r\n				&lt;html xmlns=&rdquo;http://www.w3.org/1999/xhtml&rdquo; &gt;<br />\r\n				&lt;head&gt;<br />\r\n				&lt;title&gt; 无标题页&lt;/title&gt;<br />\r\n				&lt;/head&gt;<br />\r\n				&lt;body id=&rdquo;bd&rdquo;&gt;<br />\r\n				&lt;a href=&rdquo;http://www.baidu.com&rdquo;&gt;baidu&lt;/a&gt;<br />\r\n				&lt;/body&gt;<br />\r\n				&lt;/html&gt;<br />\r\n				&lt;script type=&rdquo;text/javascript&rdquo; src=&rdquo;../Script/jquery.js&rdquo;&gt;&lt;/script&gt;<br />\r\n				&lt;script type=&rdquo;text/javascript&rdquo; &gt;<br />\r\n				$(function(){<br />\r\n				$(&ldquo;a&ldquo;).click(function(e) {//1)查找$(&rdquo;a&rdquo;);2)jQuery对象事件click;3)jQuery对象方法hide<br />\r\n				$(this).hide(&ldquo;slow&ldquo;);<br />\r\n				return false;<br />\r\n				});<br />\r\n				});<br />\r\n				&lt;/script&gt;</span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p>\r\n	<span class="top11">jQuery中有一个&ldquo;配置&rdquo;的思想，这一点使得对象的属性/事件等设置变得容易理解且十分简便，如下一个拖拽组件的初始化：</span></p>\r\n<p>\r\n	<span class="top11">&nbsp;</span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table align="center" border="0" cellpadding="6" cellspacing="0" style="border-right: rgb(0,153,204) 1px solid; table-layout: fixed; border-top: rgb(0,153,204) 1px solid; border-left: rgb(0,153,204) 1px solid; border-bottom: rgb(0,153,204) 1px solid" width="95%">\r\n	<tbody>\r\n		<tr>\r\n			<td bgcolor="#ddedfb" style="word-wrap: break-word">\r\n				<span class="top11">$(document).ready(<br />\r\n				function()<br />\r\n				{<br />\r\n				$(&rsquo;#drag1&prime;).Draggable({<br />\r\n				handle: &ldquo;ax&ldquo;, //属性设置<br />\r\n				onStart: function(el,x,y){ //事件监听器设置<br />\r\n				}<br />\r\n				});<br />\r\n				}<br />\r\n				);</span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p>\r\n	<span class="top11">可以看到，$(&quot;#drag1&quot;)是查找并创建一个jquery对象，然后调用Draggable方法进行拖拽初始化，在此方法调用时，传递一个 &ldquo;配置&rdquo;对象，进行拖拽操作的初始化配置。这一&ldquo;配置&rdquo;的思想，极大简化了一些编码步骤，并相当直观和易懂。</span></p>\r\n<p>\r\n	<span class="top11">以下我进行三个问答：</span></p>\r\n<p>\r\n	<span class="top11">1、问：为什么$(selector)之后，返回的是jQuery对象？</span></p>\r\n<p>\r\n	<span class="top11">答：从jQuery的源代码中，我们可以知道：var $ = jQuery 。因此当我们$(selector)操作时，其实就是jQuery(selector)，创建的是一个jQuery对象。当然正确的写法应该是这样 的：var jq = new $(selector); 而jQuery使用了一个小技巧在外部避免了new，在jquery方法内部：if ( window == this ) return new jQuery(selector);</span></p>\r\n<p>\r\n	<span class="top11">2、问：为什么创建一个jQuery对象之后，我们可以这样写$(selector).each(function(index){&hellip;});进行遍 历操作呢？<br />\r\n	答：其实jQuery(selector)方法调用时，在jQuery(selector)方法内部，最后返回的是一个数 组：return this.setArray(a); 而each方法体内部是一个for循环，在循环体内是这样调用的：method.call(this[i]，i) 。</span></p>\r\n<p>\r\n	<span class="top11">3、问：为什么jQuery能做到jQuery对象属性/方法/事件的插件式扩展？<br />\r\n	答：如果您有一些javasciprt的面向对象方面的 知识，就会知道，jQuery.prototype原型对象上的扩展属性/方法和事件，将会给jQuery的对象&ldquo;扩展&rdquo;。基于这一点，jQuery是这 样写的：jQuery.fn = jQuery.prototype 。所以，当我们扩展一个插件功能时，如下：</span></p>\r\n<p>\r\n	<span class="top11">&nbsp;</span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table align="center" border="0" cellpadding="6" cellspacing="0" style="border-right: rgb(0,153,204) 1px solid; table-layout: fixed; border-top: rgb(0,153,204) 1px solid; border-left: rgb(0,153,204) 1px solid; border-bottom: rgb(0,153,204) 1px solid" width="95%">\r\n	<tbody>\r\n		<tr>\r\n			<td bgcolor="#ddedfb" style="word-wrap: break-word">\r\n				<span class="top11">jQuery.fn.check = function() {<br />\r\n				return this.each(function() {<br />\r\n				this.checked = true;<br />\r\n				});<br />\r\n				};</span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p>\r\n	<span class="top11">其实就是：</span></p>\r\n<p>\r\n	<span class="top11">&nbsp;</span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table align="center" border="0" cellpadding="6" cellspacing="0" style="border-right: rgb(0,153,204) 1px solid; table-layout: fixed; border-top: rgb(0,153,204) 1px solid; border-left: rgb(0,153,204) 1px solid; border-bottom: rgb(0,153,204) 1px solid" width="95%">\r\n	<tbody>\r\n		<tr>\r\n			<td bgcolor="#ddedfb" style="word-wrap: break-word">\r\n				<span class="top11">jQuery.prototype.check = function() {<br />\r\n				return this.each(function() {<br />\r\n				this.checked = true;<br />\r\n				});<br />\r\n				};</span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p>\r\n	<span class="top11">综上所述,jQuery给我们带来了一个简洁方便的编码模型(1&gt;创建jQuery对象;2&gt;直接使用jQuery对象的属性/方法 /事件),一个强悍的dom元素查找器($),插件式编程接口(jQuery.fn),以及插件初始化的&rdquo;配置&rdquo;对象思想.</span></p>\r\n<p>\r\n	<span class="top11">附:实现自己的jQuery</span></p>\r\n<p>\r\n	<span class="top11">&nbsp;</span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table align="center" border="0" cellpadding="6" cellspacing="0" style="border-right: rgb(0,153,204) 1px solid; table-layout: fixed; border-top: rgb(0,153,204) 1px solid; border-left: rgb(0,153,204) 1px solid; border-bottom: rgb(0,153,204) 1px solid" width="95%">\r\n	<tbody>\r\n		<tr>\r\n			<td bgcolor="#ddedfb" style="word-wrap: break-word">\r\n				<span class="top11">&lt; !DOCTYPE html PUBLIC &rdquo;-//W3C//DTD XHTML 1.0 Transitional//EN&rdquo; &rdquo;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&rdquo;&gt;<br />\r\n				<br />\r\n				&lt;html xmlns=&rdquo;http://www.w3.org/1999/xhtml&rdquo;&gt;<br />\r\n				&lt;head&gt;<br />\r\n				&lt;title&gt;Untitled Page&lt;/title&gt;<br />\r\n				&lt;/head&gt;<br />\r\n				&lt;body&gt;<br />\r\n				&lt;div id=&rdquo;d&rdquo;&gt;divvv&lt;/div&gt;<br />\r\n				&lt;div id=&rdquo;fsd&rdquo;&gt;fdsf&lt;/div&gt;<br />\r\n				&lt;/body&gt;<br />\r\n				&lt;/html&gt;<br />\r\n				&lt;script type=&rdquo;text/javascript&rdquo;&gt;<br />\r\n				//实现自己的 MyQuery框架<br />\r\n				var MyQuery = function(selector){<br />\r\n				if ( window == this ) return new MyQuery(selector);<br />\r\n				//这里只实现dom类型的简单查找,嘿嘿<br />\r\n				var doms = document.getElementsByTagName(selector);<br />\r\n				var arr = [];<br />\r\n				for(var i=0; i&lt;doms .length; i++){<br />\r\n				arr.push(doms.item(i));<br />\r\n				}<br />\r\n				return this.setArray(arr);<br />\r\n				}<br />\r\n				MyQuery.prototype.setArray = function( arr ) {<br />\r\n				this.length = 0;<br />\r\n				[].push.apply( this, arr );<br />\r\n				return this;<br />\r\n				}<br />\r\n				MyQuery.fn = MyQuery.prototype;<br />\r\n				var $ = MyQuery;<br />\r\n				<br />\r\n				// 插件扩展1)each<br />\r\n				MyQuery.fn.each = function(method){<br />\r\n				for(var i=0,l=this.length; i&lt;l; i++){<br />\r\n				method.call(this[i],i);<br />\r\n				}<br />\r\n				}<br />\r\n				//插件扩展2)show<br />\r\n				MyQuery.fn.show = function(){<br />\r\n				this.each(function(i){<br />\r\n				alert(i+&ldquo;:&ldquo;+this.id+&ldquo;:&ldquo;+this.innerHTML);<br />\r\n				});<br />\r\n				}<br />\r\n				//debugger<br />\r\n				$(&ldquo;div&ldquo;).show();<br />\r\n				&lt;/script&gt;&lt;/doms&gt;&lt;/script&gt;</span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n');
INSERT INTO `article` VALUES (35, 2, '2010-04-22', 'MySQL数据库锁机制的相关原理', '<p>\r\n	<span class="top11">&nbsp; </span><span class="top11"><strong>不同于行级或页级锁定的选项：</strong></span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 版本(例如，为并行的插入在MySQL中使用的技术)，其中可以一个写操作，同时有许多读取操作。这明数据库或表支持数据依赖的不同视图，取决于访问何时开始。其它共同的术语是&ldquo;时间跟踪&rdquo;、&ldquo;写复制&rdquo;或者&ldquo;按需复制&rdquo;。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 按需复制在许多情况下优先于页级或行级锁定。然而，在最坏的情况下，它可能比使用常规锁定使用多的内存。</span></p>\r\n<p>\r\n	<span class="top11">&middot; 除了行级锁定外，你可以使用应用程序级锁定，例如在MySQL中使用GET_LOCK()和RELEASE_LOCK()。这些是建议性锁定，它们只能在运行良好的应用程序中工作。</span></p>\r\n<p>\r\n	<span class="top11">　　为达到最高锁定速度，除InnoDB 和BDB 之外，对所有存储引擎，MySQL使用表锁定(而不是页、行或者列锁定)。对于InnoDB 和BDB 表，如果你用LOCK TABLES显式锁定表，MySQL只使用表锁定;如果你不使用LOCK TABLES，因为 InnoDB 使用自动行级锁定而BDB 使用页级锁定来保证事务隔离。</span></p>\r\n<p>\r\n	<span class="top11">　　但是对于大表，对于大多数应用程序，表锁定比行锁定更好，但存在部分缺陷。表锁定使许多线程同时从一个表中进行读取操作，但如果一个线程想要对表进行写操作，它必须首先获得独占访问。更新期间，所有其它想要访问该表的线程必须等待直到更新完成。</span></p>\r\n<p>\r\n	<span class="top11">　　表更新通常情况认为比表检索更重要，因此给予它们更高的优先级。这应确保更新一个表的活动不能&ldquo;饿死&rdquo;，即使该表上有很繁重的SELECT 活动。</span></p>\r\n<p>\r\n	<span class="top11">　　表锁定在这种情况下会造成问题，例如当线程正等待，因为硬盘已满并且在线程可以处理之前必须有空闲空间。在这种情况下，所有想要访问出现问题的表的线程也被设置成等待状态，直到有更多的硬盘空间可用。</span></p>\r\n<p>\r\n	<span class="top11">　　表锁定在下面的情况下也存在问题：</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 一个客户发出长时间运行的查询。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 然后，另一个客户对同一个表进行更新。该客户必须等待直到SELECT完成。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 另一个客户对同一个表上发出了另一个 SELECT 语句。因为UPDATE比 SELECT 优先级高，该SELECT 语句等待UPDATE完成，并且等待第1个 SELECT 完成。</span></p>\r\n<p>\r\n	<span class="top11"><strong>　　下面描述了一些方法来避免或减少表锁定造成的竞争：</strong></span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 试图使 SELECT 语句运行得更快。可能必须创建一些摘要(summary)表做到这点。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 用--low-priority-updates启动mysqld。这将给所有更新(修改)一个表的语句以比SELECT语句低的优先级。在这种情况下，在先前情形的第2个SELECT语句将在UPDATE语句前执行，而不需要等候第1个 SELECT 完成。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 可以使用SET LOW_PRIORITY_UPDATES=1语句指定具体连接中的所有更新应使用低优先级。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 可以用LOW_PRIORITY属性给与一个特定的INSERT、UPDATE或DELETE语句较低优先级。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 可以用HIGH_PRIORITY属性给与一个特定的SELECT语句较高优先级。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 为max_write_lock_count系统变量指定一个低值来启动mysqld来强制MySQL在具体数量的插入完成后临时提高所有等待一个表的SELECT 语句的优先级。这样允许在一定数量的WRITE锁定后给出READ锁定。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 如果你有关于INSERT结合SELECT的问题，切换到使用新的MyISAM表，因为它们支持并发的SELECT和INSERT。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 如果你对同一个表混合插入和删除，INSERT DELAYED将会有很大的帮助。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 如果你对同一个表混合使用 SELECT 和DELETE 语句出现问题，DELETE 的LIMIT 选项可以有所帮助。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 对 SELECT 语句使用SQL_BUFFER_RESULT可以帮助使表锁定时间变短。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 可以更改mysys/thr_lock.c中的锁代码以使用单一的队列。在这种情况下，写锁定和读锁定将具有相同的优先级，对一些应用程序会有帮助。</span></p>\r\n<p>\r\n	<span class="top11">　<strong>　这里是一些MySQL中表锁定相关的技巧：</strong></span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 如果不混合更新与需要在同一个表中检查许多行的选择，可以进行并行操作。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 可以使用 LOCK TABLES 来提高速度，因为在一个锁定中进行许多更新比没有锁定的更新要快得多。将表中的内容切分为几个表也可以有所帮助。</span></p>\r\n<p>\r\n	<span class="top11">　　&middot; 如果在MySQL中表锁定时遇到速度问题，可以将表转换为 InnoDB 或BDB 表来提高性能。</span></p>\r\n<p style="text-indent: 2em">\r\n	<span class="top11">&nbsp;</span></p>\r\n');
INSERT INTO `article` VALUES (36, 2, '2010-04-22', 'PHP上传进度条深度解析', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px">随着互联网的发展，越来越多的技术开始注重用户体验，以人为本才是长久之道，于是在上传的时候，大家都不再满足一个单一的&ldquo;浏览&rdquo;按钮，纷纷推出了带上传进度条的功能。而作为解释型语言的PHP，如何做到对上传文件的检测，如何实现上传进度条以其背后的原理，54chen将在本文中一步步展开。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><strong>一. 实现篇</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px">一般情况，用PHP实现上传进度条就下面两种方法：</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px">1.APC扩展（作者是PHP的创始人，5.2后PHP已经加入APC扩展）</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px">2.PECL扩展模块 uploadprogress</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">不论是APC还是uploadprogress，都需要编译源码，因为原有的PHP函数根本不可能读取到临时文件夹里的东西。下面来看如何使用以及关键的代码：</span></span></span></p>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px"><strong>APC实现方法:</strong></span></span></span></div>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">1.安装APC</span></span></span></div>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">2.配置php.ini，设置参数 apc.rfc1867=1</span></span></span></div>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">3.关键代码：</span></span></span></div>\r\n<blockquote>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if ($_SERVER[&#39;REQUEST_METHOD&#39;] == &lsquo;POST&rsquo;) { &nbsp;//上传请求</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$status = apc_fetch(&rsquo;upload_&rsquo; . $_POST[&#39;APC_UPLOAD_PROGRESS&#39;]);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$status[&#39;done&#39;] = 1;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">echo json_encode($status); &nbsp;//输出给用户端页面里的ajax调用，相关文档请自己寻找</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">exit;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">} elseif (isset($_GET[&#39;progress_key&#39;])) { &nbsp; //读取上传进度</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$status = <span style="color: #ff0000">apc_fetch</span>(&rsquo;upload_&rsquo;.$_GET[&#39;progress_key&#39;]);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">echo json_encode($status);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">exit;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></div>\r\n</blockquote>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px"><strong>uploadprogress实现方法：</strong></span></span></span></div>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">1.使用PECL 安装uploadprogress</span></span></span></div>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">2.php.ini里面设置 uploadprogress.file.filename_template = &ldquo;/tmp/upd_%s.txt&rdquo;</span></span></span></div>\r\n<div id="_mcePaste">\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">3.关键代码：</span></span></span></div>\r\n<blockquote>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if($_SERVER[&#39;REQUEST_METHOD&#39;]==&rsquo;POST&rsquo;) {</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (is_uploaded_file($_FILES[&#39;upfile&#39;][&#39;tmp_name&#39;])) {</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$upload_dir = &lsquo;your_path/&rsquo;;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$ext &nbsp; &nbsp; &nbsp; &nbsp;= strrchr($_FILES[&#39;video&#39;][&#39;name&#39;], &lsquo;.&rsquo;);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$sessid &nbsp; &nbsp; = $_POST[&#39;UPLOAD_IDENTIFIER&#39;] ;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$tmpfile &nbsp; &nbsp;= $upload_dir . $sessid;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$sessfile &nbsp; = $upload_dir . $sessid .$ext;</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (move_uploaded_file($_FILES[&#39;upfile&#39;][&#39;tmp_name&#39;],$tmpfile)) {</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">//上传成功</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">} elseif (!empty($_GET[&#39;sessid&#39;])) {</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">header(&rdquo;Expires: Mon, 26 Jul 1997 05:00:00 GMT&rdquo;);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">header(&rdquo;Last-Modified: &rdquo; . gmdate(&rdquo;D, d M Y H:i:s&rdquo;) . &rdquo; GMT&rdquo;);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">header(&rdquo;Cache-Control: no-store, no-cache, must-revalidate&rdquo;);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">header(&rdquo;Cache-Control: post-check=0, pre-check=0&Prime;, false);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">header(&rdquo;Pragma: no-cache&rdquo;);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">header(&rdquo;Content-Type:text/html;charset=UTF-8&Prime;);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$unique_id = $_GET[&#39;sessid&#39;];</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">$uploadvalues = <span style="color: #ff0000">uploadprogress_get_info</span>($unique_id);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (is_array($uploadvalues)) {</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">echo json_encode($uploadvalues);</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">} else {</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">//读取进度失败，另外处理逻辑</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></div>\r\n	<div id="_mcePaste">\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></div>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px"><strong>二. 原理篇 </strong></span></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">注意上一篇中的红色函数。</span></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">下载到uploadprogress1.0.1进行源码分析，在代码中作了注释。</span></span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">static void uploadprogress_file_php_get_info(char * id, zval * return_value)</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">{</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">char s[1024];</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">char * filename;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">char * template;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">FILE *F;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">TSRMLS_FETCH();</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">template = INI_STR(&rdquo;uploadprogress.file.filename_template&rdquo;); <span style="color: #008000">&lt;&lt;这里读取设置好的模板</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (strcmp(template, &ldquo;&rdquo;) == 0) &nbsp;{</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">return;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">} else {</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">filename = uploadprogress_mk_filename( id, template );<span style="color: #008000">&lt;&lt;&lt;存在的话，会创建</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (!filename) return;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">F = VCWD_FOPEN(filename, &ldquo;rb&rdquo;);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (F) {</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">array_init(return_value);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">while ( fgets(s, 1000, F) ) {<span style="color: #008000">&lt;&lt;&lt;从流中读取一字符串&nbsp;*s结果数据的首地址；1000-1:一次读入数据块的长度,其默认值为1k，即1024;F文件指针</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">char *k, *v, *e;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">int index = 0;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">e = strchr(s,&rsquo;=&#39;); <span style="color: #008000">&lt;&lt;&lt;查找字符串s中首次出现字符=的位置</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (!e) continue;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">*e = 0; /* break the line into 2 parts */</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">v = e+1;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">k = s;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">/* trim spaces in front of the name/value */</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">while (*k &amp;&amp; *k &lt;= 32) k++;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">while (*v &amp;&amp; *v &lt;= 32) v++;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">/* trim spaces everywhere in the name */</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">for (e=k; *e; e++) if (*e &lt;= 32) { *e = 0; break; }</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">/* trim spaces only at the end of the value */</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">/* http://pecl.php.net/bugs/bug.php?id=14525 */</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">//for (e=v; *e; e++) if (*e &lt;= 32) { *e = 0; break; }</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (v != NULL) {<span style="color: #008000">&lt;&lt;&lt;当文件有内容时</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">for (index = strlen(v); index &gt; 0; index&ndash;) {</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (v[index] &gt; 32) break;<span style="color: #008000">&lt;&lt;&lt;累计</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">v[index] = 0;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">add_assoc_string( return_value, k, v, 1 );</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">fclose(F);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">if (filename) efree(filename);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">return;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">在源码中还能发现:</span></span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">PHP_MINIT_FUNCTION(uploadprogress)</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">{</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">REGISTER_INI_ENTRIES();</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">php_rfc1867_callback = uploadprogress_php_rfc1867_file;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">return SUCCESS;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">}</span></span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">在MINIT中修改了php_rfc1867_callback，抽取uploadprogress_php_rfc1867_file的关键代码：</span></span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">upload_id = emalloc(strlen(*e_data-&gt;value) + 1);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">strcpy(upload_id, *e_data-&gt;value);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;upload_id = upload_id;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;time_last &nbsp;= time(NULL);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;speed_average &nbsp;= 0;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;speed_last &nbsp; &nbsp; = 0;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;bytes_uploaded = read_bytes;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;files_uploaded = 0;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;est_sec &nbsp; &nbsp; &nbsp; &nbsp;= 0;</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;identifier = uploadprogress_mk_filename(upload_id, template);<span style="color: #008000">&lt;&lt;&lt;在指定的模板位置放下了临时文件</span></span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">progress-&gt;identifier_tmp = emalloc(strlen( progress-&gt;identifier) + 4);</span></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">sprintf( progress-&gt;identifier_tmp, &ldquo;%s.wr&rdquo;, progress-&gt;identifier );</span></span></span></p>\r\n</blockquote>\r\n<p>\r\n	&nbsp;</p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px"><strong>三.总结</strong></span></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 9px"><span style="font-size: 14px">在探测临时文件大小的时候，APC和&nbsp;uploadprogress其实是大同小异的方法，先记录，再取大小百分比。</span></span></span></p>');
INSERT INTO `article` VALUES (37, 2, '2010-04-22', '“先进的互联互通技术”–使用ice联通php和java [part 1 server]', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">PHP没有中间件，导致了对很多麻烦。比如，对数据库的操作必须要链接数据库，然后做SQL操作。WEB程序直接操作数据库的方法，这样会带来很多人为因素的事故隐患，以及管理上的麻烦，尤其是对大型的网站应用来说。规范的模式应该是，WEB程序传递参数到一个服务程序上，由该服务程序进行判断并最终操作数据库或者其它数据文件，这样做到了明确权限控制，和业务类型集中管理。去年伴随着ICE的推出，<a href="http://www.54chen.com/611-%e5%8e%9f%e5%88%9bdiscuz-bbs%e7%bc%93%e5%ad%98%e6%95%b4%e4%bd%93%e6%96%b9%e6%a1%88/">PHP</a>终于有了可以使用的中间件。在PHP的发展史上，应该是一个里程碑。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>ICE入门</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">ICE（Internet Communications Engine 网络通讯引擎），是由Corba原核心成员开发的一个开源中间件，据称其各种性能完全优于Corba。除此之外，我们第一次见到了直接支持PHP的中间件。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">ICE的安装，去http://www.zeroc.com/download.html 下载一个Ice针对PHP的安装包，按照说明安装上。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">ICE的使用：使用Slice（ICE的一种简单语法脚本），编写一个xx.ice文件。可以使用slice2cpp或slice2java等生成一个cpp或java的ICE框架程序，然后在这个框架程序中进行代码编写。ICE在PHP的应用继承了PHP的一贯传统&mdash;&mdash;简单，只需要在php.ini中加载该xx.ice，在PHP中就可以使用了。</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">ICE在PHP应用中的缺点，无法使用PHP编写Server端，其实这也是PHP的一个缺陷&mdash;&mdash;没有完善的多进程和多线程管理机制。因此，Server端可以采用ICE所支持的其它语言进行编写，比如JAVA/C++/VB/PYTHON等。</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>开始传说中的&ldquo;互联互通&rdquo; </strong></span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><strong><span style="color: #ff0000">本例以 Ice 3.2.1为例 下载的位置和参考的文档都在下面</span></strong></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><a href="http://www.zeroc.com/download_3_2_1.html">http://www.zeroc.com/download_3_2_1.html</a></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><a href="http://www.zeroc.com/doc/Ice-3.2.1/manual/Slice.5.10.html#50592">http://www.zeroc.com/doc/Ice-3.2.1/manual/Slice.5.10.html#50592</a></span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">ICE其实是一个网络框架，入门说明中说了，PHP不能用来做服务端，在这里我们使用java来做服务端，用php来连java，达到传说中的&ldquo;互联互通&rdquo;。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">我们的服务端用Linux，客户端也用Linux（纯废话）。JAVA环境的搭建不在表述了。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">在下载可以看出来，服务器支持yum或者是rpm是多么幸福的一件事情，或者搞一份tar.gz的包下来configure make make install，大概也就是这样。好了这样子就表示安装结束了。。。</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">安装之后的Ice相关路径:</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">slice2cpp,slice2java在/usr/bin/下</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">Ice.jar 存储于 /usr/share/java/下</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">相关的Ice的库存储于/usr/lib下.</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">第1步，建立<a href="http://www.54chen.com/736-dynamo-based-systems-designed-linkin-voldemort-voldemort-design-chinese-documents-i-am-a-chan-academy-of-sciences-translation-finalized/">服务器</a>端的demo.<span class="hilite1">ice</span>的文件（注意代码里的半全角，如果是全角自行转成半角）：</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">module Demo{</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">interface test{</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">string &nbsp; execute(string mth,string cmd);</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">};</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">};</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">第2步，执行:&nbsp;<span class="hilite2">slice2java</span> demo.<span class="hilite1">ice</span> 生成一堆文件。。。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">第3步，动手干活</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">上一步执行完会在当前目录产生一个Demo目录,目录下自动生成:<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root 2316&nbsp; 4月 15 17:01 _testDelD.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root&nbsp; 560&nbsp; 4月 15 17:01 _testDel.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root 1929&nbsp; 4月 15 17:01 _testDelM.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root 4177&nbsp; 4月 15 17:01 _testDisp.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root 1070&nbsp; 4月 15 17:01 testHolder.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root&nbsp; 488&nbsp; 4月 15 17:01 test.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root&nbsp; 481&nbsp; 4月 15 17:01 _testOperations.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root&nbsp; 460&nbsp; 4月 15 17:01 _testOperationsNC.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root 5418&nbsp; 4月 15 17:01 testPrxHelper.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root&nbsp; 569&nbsp; 4月 15 17:01 testPrxHolder.java<br />\r\n	-rw-r&ndash;r&ndash;&nbsp; 1 root root&nbsp; 567&nbsp; 4月 15 17:01 testPrx.java<br />\r\n	到目前为止,demo.<span class="hilite1">ice</span>所以<span class="hilite1">Ice</span>接口部分的定义以及相关依赖都已经自动生成.</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">我们要实现自己的execute方法,覆盖testPrx.java的同名<a href="http://www.54chen.com/272-%e5%a6%82%e4%bd%95%e5%af%b9%e4%bb%98%e6%97%a0%e8%89%af%e6%87%92%e6%83%b0ops%e7%9a%84%e5%8f%af%e8%80%bb%e7%9a%84%e9%99%90%e6%b5%81%e6%8e%aa%e6%96%bd/">方法</a>:</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">//TestImp.java</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">package Demo;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">import Ice.Current;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">public class TestImp extends _testDisp{</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">public String execute(String mth, String cmd, Current __current) {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">// TODO Auto-generated method stub</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">return mth+cmd;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">第4步，建立一个Server服务在10000<a href="http://www.54chen.com/264-%e7%94%a8iptables%e5%81%9a%e4%b8%a4%e6%9c%ba%e4%b9%8b%e9%97%b4%e7%9a%84%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91/">端口</a>进行侦听</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">//Server.java</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">package Demo;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">public class Server {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">public static void main(String[] args) {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">int status = 0;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">Ice.Communicator ic = null;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">try {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">ic = Ice.Util.initialize(args);</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">Ice.ObjectAdapter adapter = ic.createObjectAdapterWithEndpoints(</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&ldquo;TestAdapter&rdquo;, &ldquo;default -p 10000&Prime;);</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">Ice.Object object = new TestImp();</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">adapter.add(object, ic.stringToIdentity(&rdquo;TestAdapter&rdquo;));</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">adapter.activate();</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">ic.waitForShutdown();</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">} catch (Ice.LocalException e) {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">e.printStackTrace();</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">status = 1;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">} catch (Exception e) {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">System.err.println(e.getMessage());</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">status = 1;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">if (ic != null) {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">// Clean up</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">//</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">try {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">ic.destroy();</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">} catch (Exception e) {</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">System.err.println(e.getMessage());</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">status = 1;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">System.exit(status);</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">以上大部分代码都是框架生成，你只需要在里面填写TODO。把这个代码拖回来用eclipse打成jar包，注意，需要依赖ice.jar这个包，这个包可以在<a href="http://www.54chen.com/"><font color="#0b3b8c">官方</font></a>网站下载到。<a href="http://www.zeroc.com/download_3_2_1.html">http://www.zeroc.com/download_3_2_1.html</a></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">生成DemoServer.ajr后传到服务器，运行java -cp ./:Ice.jar:DemoServer.jar Demo.Server</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">运行成功的条件是Ice.jar和DemoServer.jar都在一个目录里。（Ice.jar从下载地址下载）</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">Server运行之后监听于10000端口，需要修改iptables，允许其他机器可以连接。<br />\r\n	编辑 iptables<br />\r\n	vi /etc/sysconfig/iptables</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><span>-A&nbsp;RH-Firewall-</span><span class="number">1</span><span>-INPUT&nbsp;-m&nbsp;state&nbsp;&ndash;state&nbsp;NEW&nbsp;-m&nbsp;tcp&nbsp;-p&nbsp;tcp&nbsp;&ndash;dport </span><span class="number">10000</span><span> -j&nbsp;ACCEPT </span></span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>继续深入互联互通</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这一节完成了Server，一个10000端口的Server在等待着我们用PHP来联通中。下一节，我们将讲述：IcePHP环境的搭建，PHP调用Ice如何与JAVA互联互通，以及一个完整的Demo，保存好本节的代码，后面还有用处。[未完待续]</span></span></p>');
INSERT INTO `article` VALUES (38, 2, '2010-04-22', '如何用php代码清空squid缓存下的指定文件', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">PURGE 是一个特殊的<a href="http://www.54chen.com/c/417">HTTP</a>请求方法。它是Squid 的专有方法，没有在任何RFC 里定义。它让管理员能强制删除缓存对象。既然该方法有些危险，squid 默认拒绝PURGE 请求，除非你定义了ACL 引用了该方法。否则，任何能访问cache 者也许能够删除任意缓存对象。我推荐仅仅允许来自localhost 的PURGE:<br />\r\n	acl Purge method PURGE<br />\r\n	acl Localhost src 127.0.0.1<br />\r\n	http_access allow Purge Localhost<br />\r\n	http_access deny Purge&nbsp; （squid.conf摘要）</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">以下是使用purge删除指定文件的两个函数：</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; //发送socket数据<br />\r\n	function socket_service($ip, $port=&rsquo;80&prime;, $out=&rdquo;&quot;)<br />\r\n	{<br />\r\n	&nbsp;if(trim($ip)==&rdquo;&quot;)return &ldquo;Error: without dest host!&rdquo;;<br />\r\n	&nbsp;if($out==&rdquo;) $out=&rdquo;GET / HTTP/1.1\\r\\nHost: $ip\\r\\n\\r\\n&rdquo;;<br />\r\n	&nbsp;$sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);<br />\r\n	&nbsp;$sourceips[&#39;internal&#39;] = &lsquo;6.4.10.9&prime;;<br />\r\n	&nbsp;$sourceips[&#39;external&#39;] = &lsquo;6.4.10.9&prime;;<br />\r\n	&nbsp;socket_bind($sock, $sourceips[&#39;internal&#39;]);<br />\r\n	&nbsp;socket_connect($sock, $ip, $port);<br />\r\n	&nbsp;socket_write($sock, $out);<br />\r\n	&nbsp;$return=socket_read($sock,100000);<br />\r\n	&nbsp;socket_close($sock);<br />\r\n	&nbsp;return $return;<br />\r\n	}<br />\r\n	//更新url指定的文件cache<br />\r\n	function purgeFile($url)<br />\r\n	{<br />\r\n	&nbsp;&nbsp;$squid_dv=array(&rdquo;1.5.5.6&Prime;,&rdquo;6.6.8.8&Prime;);//两个前端squid<br />\r\n	&nbsp;&nbsp;$request=&rdquo;PURGE $url \\n&rdquo;;<br />\r\n	&nbsp;&nbsp;foreach($squid_dv as $key =&gt; $ip)<br />\r\n	&nbsp;&nbsp;{<br />\r\n	&nbsp;&nbsp;&nbsp;$result=socket_service($ip,80,$request);<br />\r\n	&nbsp;&nbsp;}<br />\r\n	}</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp; 这样只需要在代码里使用 purgeFile(&rsquo;/xxx.gif&rsquo;);即可将上述两个服务器中指定的路径文件缓存删除。</span></span></p>\r\n');
INSERT INTO `article` VALUES (39, 2, '2010-04-22', 'php正则表达式常见 regex 操作符清单', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">php的正则<a href="http://www.54chen.com/c/75">表达式</a>反馈了<a href="http://www.54chen.com/c/157">php</a>的功力，下面是操作符的清单，常备重要哦。。。</span></span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table border="0" cellpadding="0" cellspacing="0" class="data-table-2" summary="Common regex operators">\r\n	<tbody>\r\n		<tr>\r\n			<th scope="col">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">操作符</span></span></th>\r\n			<th scope="col">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">用途</span></span></th>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">.（句点）</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配所有单个字符</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">^（脱字符号）</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配出现在行或字符串开头的空字符串</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">$（美元符号）</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配出现在行尾的空字符串</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">A</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配大写字母 <em>A</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">a</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配小写字母 <em>a</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">\\d</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配所有一位数字</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">\\D</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配所有单个非数字字符</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">\\w</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配所有单个字母或数字字符；同义词是 <code>[:alnum:]</code></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">[A-E]</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配所有大写的 <em>A、B、C、D</em> 或 <em>E</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">[^A-E]</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配<strong>除</strong>大写 <em>A、B、C、D</em> 或 <em>E</em> 之外的任何字符</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">X?</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配出现零次或一次的大写字母 <em>X</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">X*</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配零个或多个大写字母 <em>X</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">X+</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配一个或多个大写字母 <em>X</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">X{n}</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">精确匹配 <em>n</em> 个大写字母 <em>X</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">X{n,m}</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">至少匹配 <em>n</em> 个且不多于 <em>m</em> 个大写字母 <em>X</em>；如果忽略 <em>m</em>，则表达式将尝试匹配至少 <em>n</em> 个 <em>X</em></span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<th align="left" class="tb-row" scope="row">\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">(abc|def)+</span></span></th>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">匹配一连串的（最少一个）<em>abc</em> 和 <em>def</em>；<em>abc</em> 和 <em>def</em> 将<a href="http://www.54chen.com/c/19">匹配</a></span></span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n');
INSERT INTO `article` VALUES (40, 2, '2010-04-22', 'PHP“收发”邮件的一个程序', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&lt;?php<br />\r\n	if ($EMAIL_INC) return;<br />\r\n	$EMAIL_INC=&nbsp;&nbsp; &ldquo;defined&rdquo;;<br />\r\n	define( &ldquo;SmtpPort&rdquo;,25);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">class Pop3 {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $subject;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 邮件主题&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $from_email;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 发件人地址<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $from_name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 发件人姓名<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $to_email;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 收件人地址<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $to_name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 收件人姓名<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $body;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 邮件内容<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $filename;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 文件名<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $socket;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 当前的 socket<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Line;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Status;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_open($server, $port)&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Socket = fsockopen($server, $port);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Socket &lt;= 0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_user($user)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Socket &lt; 0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;USER $this-&gt;user\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return false;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_pass( $pass)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;PASS $pass\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function pop3_stat()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;STAT\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!eregi( &ldquo;+OK (.*) (.*)&rdquo;, $this-&gt;Line, $regs))&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $regs[1];<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_list()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;LIST\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $i = 0;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while&nbsp;&nbsp; (substr($this-&gt;Line&nbsp;&nbsp; =&nbsp;&nbsp; fgets($this-&gt;Socket, 1024),&nbsp;&nbsp; 0,&nbsp;&nbsp; 1)&nbsp;&nbsp; &lt;&gt;&nbsp;&nbsp;&nbsp; &ldquo;.&rdquo;)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $articles[$i] = $this-&gt;Line;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $i++;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $articles[ &quot;count&quot;] = $i;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $articles;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_retr($nr)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;RETR $nr\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while&nbsp;&nbsp; (substr($this-&gt;Line&nbsp;&nbsp; =&nbsp;&nbsp; fgets($this-&gt;Socket, 1024),&nbsp;&nbsp; 0,&nbsp;&nbsp; 1)&nbsp;&nbsp; &lt;&gt;&nbsp;&nbsp;&nbsp; &ldquo;.&rdquo;)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $data[$i] = $this-&gt;Line;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $i++;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $data[ &quot;count&quot;] = $i;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $data;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_dele( $nr)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;DELE $nr\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return 0;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function pop3_quit()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;QUIT\\r\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;+&rdquo;) return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	}</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">class Smtp {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; var $Subject;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // string the email@#s subject&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $FromName;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // string sender@#s name (opt)&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $ToName;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // string recipient@#s name (opt)&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Body;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // string body copy&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Attachment;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // attachment (optional)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $AttachmentType;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Socket;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Line;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; var $Status;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function Smtp($Server =&nbsp;&nbsp; &ldquo;localhost&rdquo;,$Port = SmtpPort)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $this-&gt;Open($Server, $Port);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function SmtpMail($FromEmail, $FromName, $ToEmail, $ToName, $Subject, $Body, $Attachment=null, $AttachmentType= &ldquo;TEXT&rdquo;)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Subject&nbsp;&nbsp;&nbsp; = $Subject;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;ToName&nbsp;&nbsp;&nbsp;&nbsp; = $ToName;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;FromName&nbsp;&nbsp;&nbsp;&nbsp; = $FromName;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = $Body;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Attachment = $Attachment;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;AttachmentType = $AttachmentType;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Helo() == false){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;MailFrom($FromEmail) == false){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;RcptTo($ToEmail) == false){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Body() == false){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Quit() == false){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function Open($Server, $Port)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Socket = fsockopen($Server, $Port);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Socket &lt; 0) return false;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;) return false;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function Helo()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;helo\\r\\n&rdquo;) &lt; 0 ){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;) return false;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function Ehlo()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* Well, let@#s use &ldquo;helo&rdquo; for now.. Until we need the<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; extra func@#s&nbsp;&nbsp;&nbsp; [Unk]<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;helo localhost\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;) return false;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function MailFrom($FromEmail)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;MAIL FROM: &lt;$FromEmail&gt;\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;) return false;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function RcptTo($ToEmail)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;RCPT TO: &lt;$ToEmail&gt;\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;) return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp; function Body()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $FileSize = 0;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $Attachment = null;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $fp = null;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $buffer = sprintf( &ldquo;From: %s\\r\\nTo:%s\\r\\nSubject:%s\\r\\n&rdquo;, $this-&gt;FromName, $this-&gt;ToName, $this-&gt;Subject);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;DATA\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;3&Prime;) return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket, $buffer)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Attachment == null){</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;MIME-Version: 1.0\\r\\nContent-Type: text/plain; charset=ISO-8859-1\\r\\nContent-Transfer-Encoding: 7bit\\r\\n\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;$this-&gt;Body\\r\\n\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;.\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (substr($this-&gt;Line, 0, 1) &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else{<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else{<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket, &ldquo;MIME-Version: 1.0\\r\\nContent-Type: multipart/mixed; boundary=\\&rdquo;&mdash;-=_NextPart_000_01BCFA61.A3697360\\&rdquo;\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Transfer-Encoding: 7bit\\r\\n\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;This is a multi-part message in MIME format.\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;\\r\\n&mdash;&mdash;=_NextPart_000_01BCFA61.A3697360\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Type: text/plain; charset=ISO-8859-1\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Transfer-Encoding: 7bit\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 输出邮件内容 */<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;$this-&gt;Body\\r\\n\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( fputs($this-&gt;Socket, &ldquo;\\r\\n&mdash;&mdash;=_NextPart_000_01BCFA61.A3697360\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $FileSize = filesize($this-&gt;Attachment);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($FileSize == false){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (($fp = fopen($this-&gt;Attachment, &ldquo;r&rdquo;))== false) {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else{<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $Attachment = fread($fp,$FileSize);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 如果没有附件的目录<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (($AttachName = strrchr($this-&gt;Attachment, @#/@#)) == false){</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $AttachName = $this-&gt;Attachment;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( fputs($this-&gt;Socket,<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Type: application/octet-stream; \\r\\nname=\\&rdquo;$AttachName\\&rdquo;\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Transfer-Encoding: quoted-printable\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Description: $AttachName\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Content-Disposition: attachment; \\r\\n\\tfilename=\\&rdquo;$AttachName\\&rdquo;\\r\\n&rdquo;.<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* 输出附件*/<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( fputs($this-&gt;Socket, $Attachment)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ( fputs($this-&gt;Socket, &ldquo;\\r\\n\\r\\n&mdash;&mdash;=_NextPart_000_01BCFA61.A3697360&ndash;\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if( fputs($this-&gt;Socket, &ldquo;.\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (substr($this-&gt;Line, 0, 1) &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;&nbsp;&nbsp;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function Quit()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(fputs($this-&gt;Socket,&nbsp;&nbsp; &ldquo;QUIT\\r\\n&rdquo;)&lt;0){<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Line = fgets($this-&gt;Socket, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULT&quot;] = substr($this-&gt;Line, 0, 1);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $this-&gt;Status[ &quot;LASTRESULTTXT&quot;] = substr($this-&gt;Line, 0, 1024);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($this-&gt;Status[ &quot;LASTRESULT&quot;] &lt;&gt;&nbsp;&nbsp; &ldquo;2&Prime;) return 0;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 1;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; function Close()<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fclose($this-&gt;Socket);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	}<br />\r\n	/*</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">怎样使用这个程序的一个示例</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">$MailTo = new Smtp();<br />\r\n	$MailTo-&gt;SmtpMail(&rdquo;Dave@micro-automation.net&rdquo;,&rdquo;Dave Cramer&rdquo;,<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Dave@micro-automation.net&rdquo;,&rdquo;David&rdquo;,<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &ldquo;Test Mail&rdquo;,$MailMessage,&rdquo;service.tab&rdquo;,0);<br />\r\n	$MailTo-&gt;Close();<br />\r\n	$MailTo=null;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">*/<br />\r\n	/*<br />\r\n	$pop3 = pop3_open(&rdquo;localhost&rdquo;, &ldquo;110&Prime;);<br />\r\n	if (!$pop3) {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;[ERROR] Failed to connect to localhost&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br />\r\n	}<br />\r\n	&nbsp;&nbsp;<br />\r\n	if (!pop3_user($pop3, &ldquo;unk&rdquo;)) {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;[ERROR] Username failed!&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br />\r\n	}<br />\r\n	&nbsp;&nbsp;<br />\r\n	if (!pop3_pass($pop3, &ldquo;secret&rdquo;)) {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;[ERROR] PASS failed!&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br />\r\n	}</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">$articles = pop3_list($pop3);<br />\r\n	if (!$articles) {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;[ERROR] LIST failed!&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br />\r\n	}<br />\r\n	&nbsp;&nbsp;<br />\r\n	for ($i = 1; $i &lt; $articles [&quot;count&quot;] + 1; $i++)<br />\r\n	{<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;i=$i&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $data = pop3_retr($pop3,$i);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!$data) {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;data goes wrong on @#$i@#&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 0;<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for ($j = 0; $j &lt; $data[&quot;count&quot;]; $j++)<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf(&rdquo;$data[$j]&lt;BR&gt;\\n&rdquo;);<br />\r\n	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />\r\n	}<br />\r\n	*/<br />\r\n	?&gt;</span></span></p>');
INSERT INTO `article` VALUES (41, 2, '2010-04-22', 'MySQL中各种字段的取值范围', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TINYINT<br />\r\n	-128 - 127</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TINYINT UNSIGNED<br />\r\n	0 - 255</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">SMALLINT<br />\r\n	-32768 - 32767</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">SMALLINT UNSIGNED<br />\r\n	0 - 65535</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">MEDIUMINT<br />\r\n	-8388608 - 8388607</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">MEDIUMINT UNSIGNED<br />\r\n	0 - 16777215</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">INT 或 INTEGER<br />\r\n	-2147483648 - 2147483647</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">INT UNSIGNED 或 INTEGER UNSIGNED<br />\r\n	0 - 4294967295</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">BIGINT<br />\r\n	-9223372036854775808 - 9223372036854775807</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">BIGINT UNSIGNED<br />\r\n	0 - 18446744073709551615</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">FLOAT<br />\r\n	-3.402823466E+38 - -1.175494351E-38<br />\r\n	0<br />\r\n	1.175494351E-38 - 3.402823466E+38</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">DOUBLE 或 DOUBLE PRECISION 或 REAL<br />\r\n	-1.7976931348623157E+308 - -2.2250738585072014E-308<br />\r\n	0<br />\r\n	2.2250738585072014E-308 - 1.7976931348623157E+308</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">DECIMAL[(M,[D])] 或 NUMERIC(M,D)<br />\r\n	由M(整个数字的长度,包括小数点,小数点左边的位数,小数点右边的位数,但不包括负号)和D(小数点右边的位数)来决定,M缺省为10,D缺省为0</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">DATE<br />\r\n	1000-01-01 - 9999-12-31</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">DATETIME<br />\r\n	1000-01-01 00:00:00 - 9999-12-31 23:59:59</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TIMESTAMP<br />\r\n	1970-01-01 00:00:00 - 2037年的某天(具体是哪天我也不知道,呵呵)</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TIME<br />\r\n	-838:59:59&prime; to 838:59:59</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">YEAR[(2|4)]<br />\r\n	缺省为4位格式,4位格式取值范围为1901 - 2155,0000,2位格式取值范围为70-69(1970-2069)</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">CHAR(M) [BINARY] 或 NCHAR(M) [BINARY]<br />\r\n	M的范围为1 - 255,如果没有BINARY项,则不分大小写,NCHAR表示使用缺省的字符集.在数据库中以空格补足,但在取出来时末尾的空格将自动去掉.</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">[NATIONAL] VARCHAR(M) [BINARY]<br />\r\n	M的范围为1 - 255.在数据库中末尾的空格将自动去掉.</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TINYBLOB 或 TINYTEXT<br />\r\n	255(2^8-1)个字符</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">BLOB 或 TEXT<br />\r\n	65535(2^16-1)个字符</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">MEDIUMBLOB 或 MEDIUMTEXT<br />\r\n	16777215 (2^24-1)个字符</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">LONGBLOB 或 LONGTEXT<br />\r\n	4294967295 (2^32-1)个字符</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">ENUM(&rsquo;value1&prime;,&rsquo;value2&prime;,&hellip;)<br />\r\n	可以总共有65535个不同的值</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">SET(&rsquo;value1&prime;,&rsquo;value2&prime;,&hellip;)<br />\r\n	最多有64个成员</span></span></p>');
INSERT INTO `article` VALUES (42, 2, '2010-04-22', '解读PHP开源项目中列表和hook方法：while(has_items()): thme_ite()', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">在<a href="http://www.54chen.com/architecture/wordpress-nginx-php-cgi-mysql-memory-in-the-128m-to-install-and-optimize-the-vps-notes.html">wordpress</a>,lilina等开源项目中，常常会看到一些莫名的代码，来无影去无踪，看上去很有意味，特地拿来分析分析，看看一般的作法。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>part 1&nbsp; 列表 循环显示</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">先看代码：</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&lt;?php<br />\r\n		$num = 0;<br />\r\n		if(has_items()) {<br />\r\n		while(has_items()): the_item();<br />\r\n		}<br />\r\n		?&gt;</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">以上代码，出自某开源项目。。。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">再进入the_item()函数内部，可以看到一个关键的函数：</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">* Returns the current item<br />\r\n		*<br />\r\n		* @since 1.0<br />\r\n		*<br />\r\n		* @return bool|stdClass False if item doesn&rsquo;t exist, otherwise returns the specified item<br />\r\n		*/<br />\r\n		public function current_item() {<br />\r\n		$this-&gt;previous_item = $this-&gt;current_item;<br />\r\n		$this-&gt;current_item = &rdquo;;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">$item = each($this-&gt;items);<br />\r\n		$item = $item[&#39;value&#39;];<br />\r\n		if(!$item)<br />\r\n		return false;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">$this-&gt;current_item = $item;<br />\r\n		$this-&gt;current_feed = $item-&gt;feed;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">return $item;<br />\r\n		}</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这个关键的函数是each()，来看手册：</span></span></p>\r\n<h1>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">each</span></span></h1>\r\n<div class="refnamediv">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><a name="AEN12322"></a>(PHP 3, PHP 4, PHP 5) </span></span>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">each&nbsp;&ndash;&nbsp; 返回数组中当前的<a href="http://www.54chen.com/translate/dynamo-based-systems-designed-linkin-voldemort-voldemort-design-chinese-documents-i-am-a-chan-academy-of-sciences-translation-finalized.html">键／值</a>对并将数组指针向前移动一步</span></span></p>\r\n</div>\r\n<div class="refsect1">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><a name="AEN12325"></a> </span></span>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n	<h2>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">说明</span></span></h2>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">array <strong class="methodname">each</strong> ( array &amp;array )</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">返回 <var class="parameter">array</var> 数组中当前指针位置的键／值对并向前移动数组指针。键值对被返回为四个单元的数组，键名为 <var class="literal">0</var>，<var class="literal">1</var>，<var class="literal">key</var> 和 <var class="literal">value</var>。单元 <var class="literal">0</var> 和 <var class="literal">key</var> 包含有数组单元的键名，<var class="literal">1</var> 和 <var class="literal">value</var> 包含有数据。</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">如果内部指针越过了数组的末端，则 <strong class="function">each()</strong> 返回 <tt class="constant"><strong>FALSE</strong></tt>。</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">综合来看，其实就是一个做了一个游标一样的模型，利用each来操作一个数组或者相似的结构，每次在显示的时候，都有对数据数组的本身操作，而while里的has_item，只是作简单的判断有无而已。</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><strong>part2 hook</strong></span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">第二种情况，是一个叫apply_filters的函数的<a href="http://www.54chen.com/architecture/wordpress-nginx-php-cgi-mysql-memory-in-the-128m-to-install-and-optimize-the-vps-notes.html">实现</a>。先看代码：</span></span></p>\r\n	<blockquote>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">function the_item() {<br />\r\n			global $lilina_items, $item;</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">$item = apply_filters(&rsquo;the_item&rsquo;, $lilina_items-&gt;current_item());<br />\r\n			}</span></span></p>\r\n	</blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">这是lilina里的一个函数，要看的是这个apply_filters方法，有一个简单的例子：</span></span></p>\r\n	<blockquote>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">function example_hook($string, $arg1, $arg2)<br />\r\n			{<br />\r\n			//Do stuff<br />\r\n			return $string;<br />\r\n			}<br />\r\n			$value = apply_filters(&rsquo;example_hook&rsquo;, &lsquo;filter me&rsquo;, &lsquo;arg1&prime;, &lsquo;arg2&prime;);</span></span></p>\r\n	</blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">apply_filters里面最关键的一个函数：</span></span></p>\r\n	<h1>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">call_user_func_array</span></span></h1>\r\n	<div class="refnamediv">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><a name="AEN50629"></a>(PHP 4 &gt;= 4.0.4, PHP 5) </span></span>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">call_user_func_array&nbsp;&ndash;&nbsp; Call a user function given with an array of parameters</span></span></p>\r\n	</div>\r\n	<div class="refsect1">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><a name="AEN50632"></a> </span></span>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n		<h2>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">Description</span></span></h2>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">mixed <strong class="methodname">call_user_func_array</strong> ( callback function, array param_arr )</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">Call a user defined function given by <var class="parameter">function</var>, with the <a href="http://www.54chen.com/php-tech/multi-nginx-configuration-of-single-php-fpm-approach-from-academy-of-sciences.html">parameters</a> in <var class="parameter">param_arr</var>.</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">其实这些渐渐被遗忘的<a href="http://www.54chen.com/webfe/academy-of-sciences-in-recent-years-a-good-article-summing-up.html">函数</a>，在高手们的使用下，对项目化的开发很有优势，随手记之。</span></span></p>\r\n	</div>\r\n</div>');
INSERT INTO `article` VALUES (43, 2, '2010-04-22', 'PHP上传文件类型彻底判断方案及PHP＋nginx上传大小彻底控制方案', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">上回科学院发过一篇讲述上传判断的文章，位置是</span></span></p>\r\n<h3>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><a href="http://www.54chen.com/cc/php-java-c-upload-files-how-to-accurately-determine-the-file-type-mime-literacy.html" rel="bookmark"><font color="#0b3b8c">PHP JAVA C上传文件如何准确判断文件类型－mime知识普及</font></a></span></span></h3>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">本文目的在于，进一步更正前文所述的mime判断方式，以及增加一个nginx环境里的文件上传大小所影响的代码。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>上传类型控制：</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">在我（<a href="http://www.54chen.com/"><font color="#0b3b8c">54chen</font></a>）工作中发现，其实修改文件的后缀，浏览器就会很傻瓜地传送错误的<a href="http://www.54chen.com/_linux_/everyone-network-intel-technology-symposium-record.html">mime</a>类型，所以前文的判断是一个半错误的方法（除了C代码是正确的）。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">网上流传一段PHP读取文件头判断文件类型的方法，有一些bug，经我（<a href="http://www.54chen.com/php-tech/mediawiki-pgsql.html">54chen</a>）修改实测，应该是这个样子：</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">/**<br />\r\n		* 读取文件前几个字节 判断<a href="http://www.54chen.com/webfe/academy-of-sciences-in-recent-years-a-good-article-summing-up.html">文件</a>类型<br />\r\n		*<br />\r\n		* @return String<br />\r\n		*/<br />\r\n		function checkTitle($filename) {<br />\r\n		$file&nbsp;&nbsp;&nbsp;&nbsp; = fopen($filename, &ldquo;rb&rdquo;);<br />\r\n		$bin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = fread($file, 2); //只读2字节<br />\r\n		fclose($file);<br />\r\n		$strInfo&nbsp; = @unpack(&rdquo;c2chars&rdquo;, $bin);<br />\r\n		$typeCode = intval($strInfo[&#39;chars1&#39;].$strInfo[&#39;chars2&#39;]);<br />\r\n		$fileType = &rdquo;;<br />\r\n		switch ($typeCode)<br />\r\n		{<br />\r\n		case 7790:<br />\r\n		$fileType = &lsquo;exe&rsquo;;<br />\r\n		break;<br />\r\n		case 7784:<br />\r\n		$fileType = &lsquo;midi&rsquo;;<br />\r\n		break;<br />\r\n		case 8297:<br />\r\n		$fileType = &lsquo;rar&rsquo;;<br />\r\n		break;<br />\r\n		case 255216:<br />\r\n		$fileType = &lsquo;jpg&rsquo;;<br />\r\n		break;<br />\r\n		case 7173:<br />\r\n		$fileType = &lsquo;gif&rsquo;;<br />\r\n		break;<br />\r\n		case 6677:<br />\r\n		$fileType = &lsquo;bmp&rsquo;;<br />\r\n		break;<br />\r\n		case 13780:<br />\r\n		$fileType = &lsquo;png&rsquo;;<br />\r\n		break;<br />\r\n		default:<br />\r\n		$fileType = &lsquo;unknown&rsquo;.$typeCode;<br />\r\n		}<br />\r\n		//Fix<br />\r\n		if ($strInfo[&#39;chars1&#39;]==&rsquo;-1&prime; &amp;&amp; $strInfo[&#39;chars2&#39;]==&rsquo;-40&prime; ) {<br />\r\n		return &lsquo;jpg&rsquo;;<br />\r\n		}<br />\r\n		if ($strInfo[&#39;chars1&#39;]==&rsquo;-119&prime; &amp;&amp; $strInfo[&#39;chars2&#39;]==&rsquo;80&prime; ) {<br />\r\n		return &lsquo;png&rsquo;;<br />\r\n		}<br />\r\n		return $fileType;<br />\r\n		}</span></span></p>\r\n</blockquote>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这代码可以非常正确地分出修改后的文件，从而达到阻止修改后缀名上传的情况。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>上传大小控制：</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">在PHP代码中直接读取$_FILE的size，而如果是特别大的文件，又使用了PHP＋<a href="http://www.54chen.com/architecture/54-chen-skills-the-whole-point-for-domain-names-using-nginx-and-javascript-to-do-a-simple-jump-to-inform-the-friendly-exchange-of-domain-names.html">nginx</a>的话，很有可能，超过2M的文件直接就被nginx就抛出来413错误了。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">解决的办法：</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">修改/etc/nginx/nginx.conf</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">找到对应域名的<a href="http://www.54chen.com/architecture/wordpress-nginx-php-cgi-mysql-memory-in-the-128m-to-install-and-optimize-the-vps-notes.html">server</a>段：修改client_max_body_size的值，默认是2M。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这样子还不够，如果不修改php.ini里的值，你会发现上传的文件用上面的代码判断类型的时候会出问题。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">修改/etc/php.ini</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">找到upload_max_<a href="http://www.54chen.com/cc/php-java-c-upload-files-how-to-accurately-determine-the-file-type-mime-literacy.html"><font color="#0b3b8c">filesize</font></a>，修改这个值，默认是2M。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">一番折腾，类型和大小的控制基本上就完善了。</span></span></p>');
INSERT INTO `article` VALUES (46, 2, '2010-04-22', '[原创]Discuz! BBS缓存整体方案', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><a href="http://www.54chen.com/c/505">DZ的缓存方案</a>是经典之作，不论是系统的主动缓存还是帖子内容的被动缓存。在我前面的博文【<a href="http://www.54chen.com/c/505">[原创]Discuz! BBS的主动缓存和被动缓存</a>】里所讲述的是DZ的缓存常用的一种方法，下面再说在DZ系统里如何决定一个内容是不是要缓存。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">所有的数据全都缓存，不失为一个好办法。但是，在数据更新要求及时的环境下，例如帖子回复的内容要求立即显示等地，又不得不对其缓存进行更新。所以，基本上每一个成熟的系统，都不会去把所有的东西缓存起来。这时是不是让各位很困惑，缓存就是一把双刃剑，用好了系统效率事半功倍，用得不好，产品功能将受到严重影响。DZ就是一个缓存与不缓存选取得当的系统。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">我们一起进入DZ的viewthread.php，也就是负责显示帖子内容的一个文件。代码一开始有这样一个判断：</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">$page = max($page, 1);</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">if($cachethreadlife &amp;&amp; $forum[&#39;threadcaches&#39;] &amp;&amp; !$discuz_uid &amp;&amp; $page == 1 &amp;&amp; !$forum[&#39;special&#39;]) {</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; viewthread_loadcache();</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">}</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这是什么意思呢？基本上就是在说，当一些系统的设置都满足的时候，只要是第一页就去执行viewthread_<a href="http://www.54chen.com/c/516">load</a>cache()，各位已经等不及看这个函数的意思了吧，且慢，先说说为什么选中了第一页。在经过大家长期的总结下，发现一个成熟论坛大多数时间会员都会停留在帖子的第一页，所以，DZ大胆地只将第一页进行缓存。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">DZ真的是只将第一页进行缓存吗？答案是否定的，下面我们来看viewthread_loadcache()这个函数里的内容。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这个函数写在了viewthread.php的538行，看到这个函数的第一感觉，是专业。DZ的多年开发，已经将论坛的行为研究深深刻在了代码里。如下这段代码，这个函数里的$threadcachemark这个变量，被定义为与帖子的显示顺序、是否加精、此版最后回复天数、帖子浏览数、回复数、每页显示条数进行运算得到的一个值，如果这个值小于了版块的设置，这个帖子的内容才会生效。就也是说，DZ甚至还不是但凡第一页就缓存！</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">$threadcachemark = 100 - (</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $forum[&#39;displayorder&#39;] * 15 +</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $forum[&#39;digest&#39;] * 10 +</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; min($forum[&#39;views&#39;] / max($forum[&#39;livedays&#39;], 10) * 2, 50) +</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; max(-10, (15 - $forum[&#39;lastpostdays&#39;])) +</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; min($forum[&#39;replies&#39;] / $_DCACHE[&#39;settings&#39;][&#39;postperpage&#39;] * 1.5, 15));</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这个经典的公式从何而来？由笔者有幸参加的一次DZ的培训得知，这个公式是多年来长期的积累，不断的尝试，才总结所得。至于更多的细节，大概只有DZ的总设计师才能得知。不过我们也可以从代码里得到一些提示，帖子的属性是可以作为是否缓存的权值的，而这个权值，直接决定了缓存与否。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这样的选取在DZ里到处可见，在存在分页的地方，只需要记住，前两页或者前一页，以及最后两页或最后一页，永远比中间的更值得缓存。如果读者的系统需要一个缓存方案，建议全局统计一下所有的用户关注的点，学习DZ的<a href="http://www.54chen.com/c/531">思想</a>，将这些关键的点数值化，就一定也能得出一个合适的公式。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">一个简约的缓存，每个细节的方案，筑成了DZ整体的坚实。</span></span></p>\r\n<blockquote>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">提示：平时在设计系统的时候，也许并不能考虑到这么细，如果不是受到磁盘空间的限制，您并不需要担心按照什么方案来缓存，用一刀切的方案也不错，也就是把大部分看上去很常用的数据都缓存了，但你需要更多考虑去对比是否需要更新缓存了，比如用最后回复的时间去对比，很多开源系统就都是这样干的。</span></span></p>\r\n</blockquote>');
INSERT INTO `article` VALUES (47, 2, '2010-04-22', '[原创]mediawiki安装改进手记-使用mediawikit和postgresql搭建有强大搜索', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">在yahoo工程技术部，最有趣的事情当属打开工程技术部的wiki，慢慢阅读来自前辈们的大作。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">yahoo以前使用的是twiki，后来更换了mediawiki，扩展了postgresql的搜索，使mediawiki的搜索功能得到了加强，这里，记录下我在校内搭建一整套的手记：</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>第一步.准备php和postgresql环境</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">大环境：因为是内部系统，所以图省事，WEB使用的是一个<a href="http://www.54chen.com/c/372">ubuntu</a>的机器，安装这些丝毫不用费力了。就是先用apt安装php、nginx，源码包安装lighttpd取<span style="font-size: x-small"><a href="http://www.54chen.com/c/640"><span style="font-size: x-small">spawn-cgi</span></a>一枚备用。源码包安装postgresql8.3.3。</span></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#apt-get install php5 php5-pgsql php5-mbstring php5-cgi</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#apt-get install nginx</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#wget <a href="http://www.lighttpd.net/download/lighttpd-1.4.19.tar.gz">http://www.lighttpd.net/download/lighttpd-1.4.19.tar.gz</a><br />\r\n	#tar -xvf lighttpd-1.4.19.tar.gz<br />\r\n	#cd lighttpd-1.4.19/<br />\r\n	#./configure<br />\r\n	#make<br />\r\n	#cp src/spawn-fcgi /usr/local/bin/spawn-fcgi</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">(这里图快，没使用php-fpm)</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#adduser www</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#spawn-fcgi -a 127.0.0.1 -p 9000 -C 5 -u www-data -g www-data -f /usr/bin/php-cgi</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">修改php.ini文件<br />\r\n	cgi.fix_pathinfo=1; 这样php-cgi方能正常使用SCRIPT_FILENAME这个变量</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">在/etc/nginx/sites-enable/default中添加以下代码</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">server {<br />\r\n	listen 80; //端口<br />\r\n	server_name wiki.54chen.com; //虚拟域名<br />\r\n	access_log /var/log/nginx/hwiki.54chen.com.access.log; //访问日志<br />\r\n	location / {<br />\r\n	root /home/wiki.54chen.com; //size根目录<br />\r\n	index index.php;<br />\r\n	}<br />\r\n	location ~ \\.php$ { #php fastcgi的配置<br />\r\n	fastcgi_pass 127.0.0.1:9000; #php fastcgi的代理端口与ip<br />\r\n	fastcgi_index index.php;<br />\r\n	fastcgi_param SCRIPT_FILENAME /home/wiki.54chen.com$fastcgi_script_name; #要处理的php文件的路径<br />\r\n	include /etc/nginx/fastcgi_params; #fastcgi的参数文件地址<br />\r\n	}<br />\r\n	}</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">启动</span></span></p>\r\n<pre>\r\n<span style="font-family: 宋体"><span style="font-size: 14px">/etc/init.d/nginx start</span></span></pre>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">大功告成！</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">postgresql的安装请进<span style="color: #3366cc; font-size: x-small"><a href="http://www.54chen.com/c/601"><span style="color: #3366cc; font-size: x-small">使用postgreSQL+bamboo搭建比lucene方便N倍的全文搜索 第一部分</span></a></span></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>第二步.安装mediawiki</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#wget <a href="http://downloads.sourceforge.net/sourceforge/wikipedia/mediawiki-1.8.2.tar.gz?use_mirror=jaist">http://downloads.sourceforge.net/sourceforge/wikipedia/mediawiki-1.8.2.tar.gz?use_mirror=jaist</a></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">#解压到/home/wiki.54chen.com</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">通过浏览器访问安装，安装时选择postgresql.</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">将wiki目录下connfig目录中的LocalSettings.php剪切到wiki目录中，把$wgEnableUploads = false;改为$wgEnableUploads = true;（这样允许上传图片了），还有就是把Wiki的Logo改成您所需要的$wgLogo = &ldquo;$wgStylePath/common/images/wiki.png&rdquo;。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>第三步.修改meidawiki及修改sql</strong><br />\r\n	1.修改DB<br />\r\n	按标题搜的触发器修改为<br />\r\n	<code>CREATE OR REPLACE FUNCTION mediawiki.ts2_page_title()<br />\r\n	RETURNS &quot;trigger&quot; AS<br />\r\n	$BODY$<br />\r\n	BEGIN<br />\r\n	IF TG_OP = &#39;INSERT&#39; THEN<br />\r\n	NEW.titlevector = to_tsvector(&#39;chinesecfg&#39;,COALESCE(REPLACE(NEW.page_title,&#39;/&#39;,&#39; &#39;),&#39;&#39;));<br />\r\n	ELSIF NEW.page_title != OLD.page_title THEN<br />\r\n	NEW.titlevector := to_tsvector(&#39;chinesecfg&#39;,COALESCE(REPLACE(NEW.page_title,&#39;/&#39;,&#39; &#39;),&#39;&#39;));<br />\r\n	END IF;<br />\r\n	RETURN NEW;<br />\r\n	END;<br />\r\n	$BODY$<br />\r\n	LANGUAGE &#39;plpgsql&#39; VOLATILE;<br />\r\n	ALTER FUNCTION mediawiki.ts2_page_title() OWNER TO wikiuser;</code></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">按内容搜索的触发器修改为<br />\r\n	<br />\r\n	<code>CREATE OR REPLACE FUNCTION mediawiki.ts2_page_text()<br />\r\n	RETURNS &quot;trigger&quot; AS<br />\r\n	$BODY$<br />\r\n	BEGIN<br />\r\n	IF TG_OP = &#39;INSERT&#39; THEN<br />\r\n	NEW.textvector = to_tsvector(&#39;chinesecfg&#39;,COALESCE(NEW.old_text,&#39;&#39;));<br />\r\n	ELSIF NEW.old_text != OLD.old_text THEN<br />\r\n	NEW.textvector := to_tsvector(&#39;chinesecfg&#39;,COALESCE(NEW.old_text,&#39;&#39;));<br />\r\n	END IF;<br />\r\n	RETURN NEW;<br />\r\n	END;<br />\r\n	$BODY$<br />\r\n	LANGUAGE &#39;plpgsql&#39; VOLATILE;<br />\r\n	ALTER FUNCTION mediawiki.ts2_page_text() OWNER TO wikiuser;</code></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">对标题的索引修改<br />\r\n	<br />\r\n	<code>drop index ts2_page_title;<br />\r\n	CREATE INDEX ts2_page_title<br />\r\n	ON mediawiki.page<br />\r\n	USING gin<br />\r\n	(titlevector);</code></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">对内容的索引修改<br />\r\n	<br />\r\n	<code>drop index ts2_page_text;<br />\r\n	CREATE INDEX ts2_page_text<br />\r\n	ON mediawiki.pagecontent<br />\r\n	USING gin<br />\r\n	(textvector);</code></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">修改 includes/SearchPosgres.php 146行：<br />\r\n	<code>$prefix = $wgDBversion &lt; 8.3 ? &quot;&#39;default&#39;,&quot; : &quot;&#39;chinesecfg&#39;,&quot;;</code></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">大功告成，搜索的时候就使用了bamboo的分词来搜了，如果还有兴趣可以加强175-179行的sql就能得到更加强大的wiki。</span></span></p>');
INSERT INTO `article` VALUES (48, 2, '2010-04-22', '究竟什么是TSRMLS_CC？', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">如果你曾经做过php内核或者是<a href="http://www.54chen.com/c/91">php扩展</a>方面的工作，你一定见到过这个到处都是的结构，但是却从来没有人提起过它。知道这是什么的人典型回答不知道的人都会这样说：&ldquo;不用管它是什么，只需要在这里、这里还有这里用，如果编译器说少一个tsrm_ls，就加一个&hellip;&rdquo;。这样回答并非都是因为这个人懒惰（的确是有一点点懒），其实那只是在说引擎甚至可以不管这个神奇的值在简化什么，这是因为一个新入门的扩展开发者知道它的结构没有什么益处。这信息就像奶牛的意见一样，没关系，就是牛叫而已。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;既然我喜欢听自己喋喋不休的无意义主题（这个月我已经少写很多博客了），我想我得弥补这一主题，看看会不会有人通过他能领会什么。你可以责怪Lukas(Lukas Smith 是 PEAR DB 的主要作者应该是这个Lukas，译者注)，他让我一直在<a href="http://www.planet-php.net/">planet-php.net</a>上。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>术语</strong></span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;TSRM</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>T</strong>hread <strong>S</strong>afe <strong>R</strong>esource <strong>M</strong>anager - 这是一个经常被忽视的层面，就会有也是很少被讨论到，在你的<a href="http://www.54chen.com/c/61">PHP源代码</a>包中，它被隐藏在/TSRM目录中。默认情况下，TSRM 层只在编译需要它的SAPI的时候才会打开（例如apache2-worker）。所有的在win32下编译的SAPI都会有TSRM层而不会管它们是否需要。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">ZTS</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><strong>Z</strong>end <strong>T</strong>hread <strong>S</strong>safety -通常情况下，与TSRM有相同的用处。具体来说不同在于，ZTS的使用需要在编译的时候加上参数如<span style="font-family: courier">./configure</span> ( <span style="font-family: courier">&ndash;enable-experimental-zts</span> for PHP4, <span style="font-family: courier">&ndash;enable-maintainer-zts</span> for PHP5），而TSRM是否被使用是由#define的预处理机制来确定的。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">tsrm_ls</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TSRM <strong>l</strong>ocal <strong>s</strong>torage - 当ZTS可用时，这是它在TSRMLS_*宏里传来传去的实际的变量名。它作为一个指向那个线程的独立数据存储块开始位置的指针，我会在一会儿后将它覆盖掉。</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">TSRMLS_??</span></span></p>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">有四个宏设计来为了使ZTS模式和非ZTS模式之间的差异变得平滑，当ZTS不能用时，这四个宏同时都没有任何用处。而在ZTS启用的时候，它们扩大了以下的定义：</span></span></p>\r\n<p>\r\n	<li>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier">TSRMLS_C&nbsp;&nbsp;&nbsp;tsrm_ls</span></span></span></li>\r\n</p>\r\n<p>\r\n	<li>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier">TSRMLS_D&nbsp;&nbsp;&nbsp;void ***tsrm_ls</span></span></span></li>\r\n</p>\r\n<p>\r\n	<li>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier">TSRMLS_CC&nbsp;&nbsp;, tsrm_ls</span></span></span></li>\r\n</p>\r\n<p>\r\n	<li>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier">TSRMLS_DC&nbsp;&nbsp;, void ***tsrm_ls</span> </span></span>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier"><strong>综述</strong></span></span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier">在任何普通的C程序（PHP也一样）中，要在两个不同的函数间传递相同的数据块，你两种办法。</span></span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px"><span style="font-family: courier">第一种方法是通过函数的参数传递值：</span></span></span></p>\r\n		<blockquote>\r\n			<pre>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">#include &lt;stdio.h&gt;\r\n\r\nvoid output_func(char *message)\r\n{\r\n    printf(&quot;%s\\n&quot;, message);\r\n}\r\n\r\nint main(int argc, char *argv[])\r\n{\r\n    output_func(argv[0]);\r\n\r\n    return 0;\r\n}</span></span></pre>\r\n		</blockquote>\r\n		<pre>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">另一种方法，你可以把这个值保存在一个上层的全局变量中，让函数通过它来取得：</span></span></pre>\r\n		<blockquote>\r\n			<pre>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">#include &lt;stdio.h&gt;\r\n\r\nchar *message;\r\n\r\nvoid output_func(void)\r\n{\r\n    printf(&quot;%s\\n&quot;, message);\r\n}\r\n\r\nint main(int argv, char *argv[])\r\n{\r\n    message = argv[0];\r\n    output_func();\r\n\r\n    return 0;\r\n}</span></span></pre>\r\n		</blockquote>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">这两种方法各有优点和缺点，而且在在实际应用中你常常会看到两者结合使用。事实上，PHP里到处都是全局变量，从类型标识符，到函数回调指针，再到请求特殊的信息例如用于存储用户空间变量的符号表。试图通过函数参数的方法来传递那些变量是不方便的，例如PHP这样的应用常常会需要去注册回调方法来给不支持上下文数据的外部的库使用，此时使用参数传递是不可能的。</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">因此，共同的信息，像执行栈、函数表、类表以及扩展登记表都是在全局范围里进行声明的，以便它们能在整个应用的任何一个位置都能使用。对于单线程的SAPIs，例如CLI、APACHE1，或者甚至Apache2-prefork，这样做都是完美的。在RINIT/Activation 阶段，请求具体结构被初始化，并在RSHUTDOWN/Deactivation 阶段重新设置回初始的值等待下一次的请求。一个像APACHE1这样特定的WEB服务器，可以一次处理多个页面，是因为它会产生多个进程，每个进程会在自己的进程空间内使用自己的全局变量副本。</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">现在，让我们来介绍像Apache2-worker或者IIS这样的线程服务器。在这种情况下，在指定时间里只有一个进程空间是可用的，由它抛出多线程处理。每一个线程都会类似一个单独的进程的方式工作。在处理请求的时候服务会一次一个地来。当两个或者多个<a href="http://www.54chen.com/c/71">线程</a>去处理同一时间的一个请求的时候，麻烦就出现了。每个<a href="http://www.54chen.com/c/73">线程</a>都试图去使用全局变量来保存它的特定请求信息，并尝试写向同样的存储空间。这样子最少会导致一个脚本里声明的用户空间变量在另一个脚本中出现。而在实践中，这样会导致快速灾难性的错误和不可预测的情况，因为内存可以释放两次或者独立的线程写了相互矛盾的信息。</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px"><strong>不全的全局</strong></span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">解决方案需要一个引擎、一个核心，还有任何一个使用全局存储的<a href="http://www.54chen.com/c/91">扩展</a>都要决定会使用多少内存给具体的请求数据。然后，在运行的每一个新的线程中，给它们每个分配一块内存，用来存储它们的数据，从而使每个线程都有自己的本地存储。为了把所有的被指定线程用到的内存块聚成一组，最后一个指针向量被开辟来保存子结构的指针。这个指针指向tsrm_ls变量，被TSRMLS_*家族的宏所使用。为了看清它是怎么工作的，我们先来看一个扩展的例子：</span></span></p>\r\n		<blockquote>\r\n			<pre>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">typedef struct _zend_myextension_globals {\r\n    int foo;\r\n    char *bar;\r\n} zend_myextension_globals;\r\n\r\n#ifdef ZTS\r\nint myextension_globals_id;\r\n#else\r\nzend_myextension_globals myextension_globals;\r\n#endif\r\n\r\n/* Triggered at the beginning of a thread */\r\nstatic void php_myextension_globals_ctor(zend_myextension_globals *myext_globals TSRMLS_DC)\r\n{\r\n    myext_globals-&gt;foo = 0;\r\n    myext_globals-&gt;bar = NULL;\r\n}\r\n\r\n/* Triggered at the end of a thread */\r\nstatic void php_myextension_globals_dtor(zend_myextension_globals *myext_globals TSRMLS_DC)\r\n{\r\n    if (myext_globals-&gt;bar) {\r\n        efree(myext_globals-&gt;bar);\r\n    }\r\n}\r\n\r\nPHP_MINIT_FUNCTION(myextension)\r\n{\r\n#ifdef ZTS\r\n    ts_allocate_id(&amp;myextension_globals_id, sizeof(zend_myextension_globals),\r\n                   php_myextension_globals_ctor, php_myextension_globals_dtor);\r\n#else\r\n    php_myextension_globals_ctor(&amp;myextension_globals TSRMLS_CC);\r\n#endif\r\n\r\n    return SUCCESS;\r\n}\r\n\r\nPHP_MSHUTDOWN_FUNCTION(myextension)\r\n{\r\n#ifndef ZTS\r\n    php_myextension_globals_dtor(&amp;myextension_globals TSRMLS_CC);\r\n#endif\r\n\r\n    return SUCCESS;\r\n}</span></span></pre>\r\n		</blockquote>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">这里可以看到，扩展在启动的时候声明了它全局需求的变量给TSRM层，它需要sizeof(zend_myextension_globals)字节的存储，并且在初始化或者销毁指定的线程的本地存储的时候提供了回调函数。myextension_globals_id里的值可得出偏移量（对所有线程是公共的），存储于tsrm_ls向量，指向那个线程本地存储的指针中也是这个向量。如果ZTS不能用，数据存储只不过是放在真实的全局环境中，并且在线程初始和销毁的过程中需要手动执行初始化和销毁的程序。如果你现在想知道为什么<span style="font-family: courier">TSRMLS_CC</span> 被包含在非ZTS块中，那我可以很确定我没有使你看睡着了。这些都是不是必须的，因为我们知道非ZTS里他们有和没有一个样，但这有助于鼓励函数原型调用时引用它们的好习惯。</span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px"><strong>把它们聚在一起</strong></span></span></p>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">最后一块线程安全的疑惑来自于一个问题：&ldquo;我如何获得这些数据结构？&rdquo;这个问题的答案来自于另一个有着相似样子的宏。在每个扩展或者是核心组件定义的头文件中，有一个宏的定义如下所示：</span></span></p>\r\n		<blockquote>\r\n			<pre>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">#ifdef ZTS\r\n# define   MYEXTENSION_G(v)     \\\r\n             (((zend_myextension_globals*)(*((void ***)tsrm_ls))[(myextension_globals_id)-1])-&gt;v)\r\n#else\r\n# define   MYEXTENSION_G(v)     (myextension_globals.v)\r\n#endif</span></span></pre>\r\n		</blockquote>\r\n		<p>\r\n			<span style="font-family: 宋体"><span style="font-size: 14px">因此，当ZTS不可用时，这个宏简单地收集来自全局环境中的即时值作用正确的值，否则，它将根据ID将结构开辟在本线程的本地存储拷贝中，并且从那里引用到值。</span></span></p>\r\n	</li>\r\n</p>\r\n');
INSERT INTO `article` VALUES (45, 2, '2010-04-22', 'PHP JAVA C上传文件如何准确判断文件类型－mime知识普及', '<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">MIME的英文全称是&rdquo;Multipurpose Internet Mail Extensions&rdquo; 多功能Internet 邮件扩充服务，它是一种多用途网际邮件扩充协议，在1992年最早应用于电子邮件系统，但后来也应用到浏览器。服务器会将它们发送的多媒体数据的类型告诉 浏览器，而通知手段就是说明该多媒体数据的<a href="http://www.54chen.com/61-php%e2%80%9c%e6%94%b6%e5%8f%91%e2%80%9d%e9%82%ae%e4%bb%b6%e7%9a%84%e4%b8%80%e4%b8%aa%e7%a8%8b%e5%ba%8f/">MIME</a>类型，从而让浏览器知道接收到的信息哪些是MP3文件，哪些是Shockwave文件等等。服务器将 <a href="http://www.54chen.com/61-php%e2%80%9c%e6%94%b6%e5%8f%91%e2%80%9d%e9%82%ae%e4%bb%b6%e7%9a%84%e4%b8%80%e4%b8%aa%e7%a8%8b%e5%ba%8f/">MIME</a>标志符放入传送的数据中来告诉浏览器使用哪种插件读取相关文件。</span></span></p>\r\n<p>\r\n	&nbsp;</p>\r\n<table border="1" cellspacing="0" style="width: 534px; height: 110px">\r\n	<tbody>\r\n		<tr>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">文件</span></span></td>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">用IE7上传</span></span></td>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">用Firefox3.0上传</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">GIF</span></span></td>\r\n			<td>\r\n				<p>\r\n					<span style="font-family: 宋体"><span style="font-size: 14px">image/gif</span></span></p>\r\n			</td>\r\n			<td>\r\n				<p>\r\n					<span style="font-family: 宋体"><span style="font-size: 14px">image/gif</span></span></p>\r\n			</td>\r\n		</tr>\r\n		<tr>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">JPG</span></span></td>\r\n			<td>\r\n				<p>\r\n					<span style="font-family: 宋体"><span style="font-size: 14px">image/pjpeg</span></span></p>\r\n			</td>\r\n			<td>\r\n				<p>\r\n					<span style="font-family: 宋体"><span style="font-size: 14px">image/jpeg</span></span></p>\r\n			</td>\r\n		</tr>\r\n		<tr>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">ZIP</span></span></td>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">application/x-compressed</span></span></td>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">application/octet-stream</span></span></td>\r\n		</tr>\r\n		<tr>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">JSP</span></span></td>\r\n			<td>\r\n				<p>\r\n					<span style="font-family: 宋体"><span style="font-size: 14px">text/html</span></span></p>\r\n			</td>\r\n			<td>\r\n				<p>\r\n					<span style="font-family: 宋体"><span style="font-size: 14px">text/html</span></span></p>\r\n			</td>\r\n		</tr>\r\n		<tr>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">EXE</span></span></td>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">application/octet-stream</span></span></td>\r\n			<td>\r\n				<span style="font-family: 宋体"><span style="font-size: 14px">application/octet-stream</span></span></td>\r\n		</tr>\r\n	</tbody>\r\n</table>\r\n<p>\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">上边的黄图哦不红图表示出了不同的浏览器所上传的不同的<a href="http://www.54chen.com/61-php%e2%80%9c%e6%94%b6%e5%8f%91%e2%80%9d%e9%82%ae%e4%bb%b6%e7%9a%84%e4%b8%80%e4%b8%aa%e7%a8%8b%e5%ba%8f/">mime</a>的区别，研究了一下，暂时没有发现可修改假冒mime的方法。</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px"><code>&lt;form <strong>enctype=&ldquo;multipart/form-data&rdquo;</strong> action=&ldquo;URL&rdquo; method=&ldquo;post&rdquo;&gt;<br />\r\n	&lt;input type=&ldquo;hidden&rdquo; name=&ldquo;MAX_FILE_SIZE&rdquo; value=&ldquo;1000&Prime;&gt;<br />\r\n	&lt;input <strong>name=&ldquo;myFile&rdquo;</strong> type=&ldquo;file&rdquo;&gt;<br />\r\n	&lt;input type=&ldquo;submit&rdquo; value=&ldquo;上传文件&rdquo;&gt;<br />\r\n	&lt;/form&gt;</code></span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">这个代码上传文件后：</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">使用PHP:</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">$_FILES[&#39;myFile&#39;][&#39;<strong>type</strong>&#39;]&nbsp;&nbsp; 文件的 MIME 类型，需要浏览器提供该信息的支持，例如&rdquo;<a href="http://www.54chen.com/576-54%e9%99%88%e7%a7%91%e5%ad%a6%e9%99%a28021x%e6%ba%90%e4%bb%a3%e7%a0%81%e4%b8%8b%e8%bd%bd/">image</a>/gif&rdquo;。</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">使用struts2限制类型：</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&lt;interceptor-ref name=&rdquo;fileUpload&rdquo;&gt;<br />\r\n	&lt;param name=&rdquo;allowedTypes&rdquo;&gt;application/zip,application/x-zip-compressed,application/rar,application/octet-stream&lt;/param&gt;<br />\r\n	&lt;param name=&rdquo;maximumSize&rdquo;&gt;3145728&lt;/param&gt;<br />\r\n	&lt;/interceptor-ref&gt;</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;</span></span></p>\r\n<p style="margin-left: 5px">\r\n	<span style="font-family: 宋体"><span style="font-size: 14px">使用C/java（由<a href="http://www.54chen.com/801-54-chen-academy-schools-the-development-process-and-the-album-broke-the-heart-of-technical-analysis/">人人网</a>文斌大侠提供）：</span></span></p>\r\n<div>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px"><strong>public</strong><strong>static</strong><strong>boolean</strong>isImageJpeg(<strong>byte</strong>[] blob) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob != <strong>null</strong>&amp;&amp; blob.length&gt; 2) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 0xFFD8</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob[0] == (<strong>byte</strong>)0xFF &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[1] == (<strong>byte</strong>)0xD8) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>true</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>false</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; <strong>public</strong><strong>static</strong><strong>boolean</strong>isImageBmp(<strong>byte</strong>[] blob) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob != <strong>null</strong>&amp;&amp; blob.length&gt; 2) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // BM: Windows 3.1x, 95, NT, &hellip;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // BA: OS/2 Bitmap Array</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // CI: OS/2 Color Icon</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // CP: OS/2 Color Pointer</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // IC: OS/2 Icon</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // PT: OS/2 Pointer</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>((blob[0] == &lsquo;B&rsquo;&amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;blob[1] == &lsquo;M&rsquo;)</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;||</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (blob[0] == &lsquo;B&rsquo;&amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;blob[1] == &lsquo;A&rsquo;)) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>true</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>false</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; <strong>public</strong><strong>static</strong><strong>boolean</strong>isImagePng(<strong>byte</strong>[] blob) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob != <strong>null</strong>&amp;&amp; blob.length&gt; <img alt="8)" src="http://www.54chen.com/wp-includes/images/smilies/icon_cool.gif" /> {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // 89 50 4E 47 0D 0A 1A 0A</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob[0] == (<strong>byte</strong>)0&times;89 &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[1] == (<strong>byte</strong>)0&times;50 &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[2] == (<strong>byte</strong>)0&times;4E &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[3] == (<strong>byte</strong>)0&times;47&nbsp;&nbsp;&nbsp; &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[4] == (<strong>byte</strong>)0&times;0D &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[5] == (<strong>byte</strong>)0&times;0A &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[6] == (<strong>byte</strong>)0&times;1A &amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[7] == (<strong>byte</strong>)0&times;0A)</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>true</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>false</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; <strong>public</strong><strong>static</strong><strong>boolean</strong>isImageGif(<strong>byte</strong>[] blob) {</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob != <strong>null</strong>&amp;&amp; blob.length&gt; 3) { // 只有3字节的gif？这里仅避免异常</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if</strong>(blob[0] == &lsquo;G&rsquo;&amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[1] == &lsquo;I&rsquo;&amp;&amp;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blob[2] == &lsquo;F&rsquo;)</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>true</strong>;</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n	<p align="left">\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong><strong>false</strong>;</span></span></p>\r\n	<p>\r\n		<span style="font-family: 宋体"><span style="font-size: 14px">&nbsp;&nbsp;&nbsp; }</span></span></p>\r\n</div>\r\n');

-- --------------------------------------------------------

-- 
-- 表的结构 `careers`
-- 

CREATE TABLE `careers` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) default '1',
  `company` varchar(20) NOT NULL,
  `url` varchar(200) NOT NULL,
  `time` date NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=25 ;

-- 
-- 导出表中的数据 `careers`
-- 

INSERT INTO `careers` VALUES (23, 1, '在在在枯枯枯要工 在在在', 'http://www.baidu.com', '2010-04-22');

-- --------------------------------------------------------

-- 
-- 表的结构 `classes`
-- 

CREATE TABLE `classes` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) NOT NULL,
  `date` varchar(10) default NULL,
  `class` varchar(15) default NULL,
  `status` varchar(5) default NULL,
  `title` varchar(20) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=83 ;

-- 
-- 导出表中的数据 `classes`
-- 

INSERT INTO `classes` VALUES (-1, 1, NULL, NULL, NULL, '2010年4月/5月开班信息');
INSERT INTO `classes` VALUES (78, 1, '5月15日', '网页设计周末班', '热招', NULL);
INSERT INTO `classes` VALUES (76, 1, '5月15日', 'PHP开发周末班', '热招', NULL);
INSERT INTO `classes` VALUES (74, 1, '5月5日', '网页设计脱产班', '热招', NULL);
INSERT INTO `classes` VALUES (72, 1, '5月5日', '平面设计师脱产班', '热招', NULL);
INSERT INTO `classes` VALUES (75, 1, '5月10日', '网站美工脱产班', '热招', NULL);
INSERT INTO `classes` VALUES (70, 1, '5月5日', 'PHP架构脱产班', '热招', NULL);
INSERT INTO `classes` VALUES (79, 1, '5月8日', '平面设计周末班', '热招', NULL);
INSERT INTO `classes` VALUES (80, 1, '4月24日', '平面设计周末班', '热招', NULL);
INSERT INTO `classes` VALUES (81, 1, '4月24日', '网页设计周末班', '热招', NULL);
INSERT INTO `classes` VALUES (82, 1, '4月24日', 'PHP开发周末班', '热招', NULL);

-- --------------------------------------------------------

-- 
-- 表的结构 `course`
-- 

CREATE TABLE `course` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) NOT NULL,
  `title` varchar(50) NOT NULL,
  `introduction` varchar(200) NOT NULL,
  `content` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=22 ;

-- 
-- 导出表中的数据 `course`
-- 

INSERT INTO `course` VALUES (9, 2, 'Web前端工程师', '培训学员精通HTML、CSS、div, JavaScript、XML等网页技术。熟悉W3C标准熟悉不同浏览器（IE/Firefox）之间的差异，写出的代码能够有很好的兼容性。熟悉jQuery等JS框架，具有良好的代码风格、接口设计与程序架构熟悉AJAX，熟悉PHP语言以及MySQL数据库，熟悉服务器配置。', '<p>\r\n	1.Photoshop<br />\r\n	&nbsp;学习图像处理、编辑、通道、图层、路径综合运用;图像色彩的校正；各种特效滤镜的使用;特效字的制作;图像输出与优化等,灵活运用图层风格，流体变形及褪底和蒙板，制作出千变万化的图像特效。<br />\r\n	2.reworks<br />\r\n	了解 Fireworks 基本工具的操作。文本编辑；矢量、位图工具的使用，动态滤镜,、混合模式与蒙板，切片和热点；元件、按钮、导航条与弹出菜单。学会使用 Fireworks 优化并导出网页，进行切割。<br />\r\n	3.FLASH<br />\r\n	掌握复选框、组合框、列表框、按钮、单选钮、滚动条、滚动窗格组件的创建方法；掌握自定义组件的颜色、修改组件的图形外观、使用组件创建表单。同时了解和学会使用 Action 语言行，执行代码。<br />\r\n	4HTML<br />\r\n	学习 HTML 的基本语法、修改常用的 HTML 标签<br />\r\n	5Dreamweaver<br />\r\n	掌握网页设计的基本工作流程，了解 Dreamweaver 在流程中的作用；掌握网页设计的基本原则，熟知建立网站并生成网页的基本流程，熟练应用<br />\r\n	6div+css<br />\r\n	学习附加外部样式表，链接方式和导入方式；新建样式，类、标签，新建样式表文件；详解使用 DIV+CSS 布局和 Web2.0 页面和网站布局的方法和流程。利用 Dreamweaver 实现网站布局，总揽全局<br />\r\n	熟悉W3C标准熟悉不同浏览器（IE/Firefox）之间的差异，写出的代码能够有很好的兼容性。<br />\r\n	页面的属性、边距、链接、标题；设置等段落样式；设置段落的列表样式；建立链接的多种设置方法；链接四种状态的颜色与下划线设置。详解表格并使用表格排版布局网站，掌握规范。 通过对经典站点的详尽解析，了解不同类型网络媒体的设计需求和内部逻辑关系。学习网站拓扑的设计规则，从而能够针对不同的设计主题，完成任何类型网络媒体整体结构设计，得心应手。<br />\r\n	7.Javascript<br />\r\n	运用语言程序的构成和编写；使用 Javascript 给页面添加动态交互事件；对表单本地数据验证，降低服务器的负荷；制作广告，页面漂浮图片等常用效果；为流行的 Ajax 技术提供支持，灵活运用。</p>');
INSERT INTO `course` VALUES (10, 1, '平面设计师就业专修班', '熟练平面设计各种工具软件，能够掌握平面设计方面的基本理论和基本技能，达到商业美术设计人员的要求。学历LOGO设计，VI设计系统课程。了解印刷工艺流程的制作，排版印刷，折页画册，书箱杂志制作。程的制作，排版印刷，折页画册，书箱杂志制作。程的制作，排版印刷，折页画册，书箱杂志制作。程的制作，排版印刷，折页画册，书箱杂志制作。', '<p>\r\n	<br />\r\n	<span style="color: #a52a2a"><span style="font-size: 16px"><strong>课程体系介绍</strong></span></span><br />\r\n	<strong>1.平面设计工具软件</strong><br />\r\n	平面设计软件是所有电脑图形图像艺术工作的基础，通过对图像处理软件Photoshop、矢量图形插画设计软件Illustrator、印刷排版设计软件InDesign和Coreldraw设计软件进行熟练的操作和运用，为今后的设计打下坚实的基础。<br />\r\n	<strong>2.色彩构成</strong><br />\r\n	使学员了解色彩合成原理，色彩平衡，以及色彩组合及配色的基本规律。<br />\r\n	<strong>3.Logo设计</strong><br />\r\n	结合 Photoshop 、Adobe Illustrator 等软件的基本绘图工具的讲解和训练，使学生掌握 Logo 设计的原理和规范；明确表现设计主题；对 Logo 设计的种类、手法、技巧有深刻的理解，熟练应用<br />\r\n	<strong>4.VI设计</strong><br />\r\n	综合运用 Adobe Photoshop 、Adobe Illustrator、Adobe Indesign 等软件，结合视觉识别系统设计理论的讲解，使学生掌握VI设计的标准和规范；面对不同需求的VI设计作品均能独立完成。<br />\r\n	<strong>5.版面构成与排版</strong><br />\r\n	版面的基本构成方法和规律，板式的类型，版面设计的基本概念。版式设计是现代设计艺术的重要组成部分。版式设计的范围可涉及到报纸、杂志、书籍、画册、产品样本、挂历、招贴、唱片封套等。排版的空间处理，排版的设计步骤，排版的样式的学习，能熟练运用于平面设计的各个领域。<br />\r\n	<strong>6.单页 折页 画册制作</strong><br />\r\n	结合 Photoshop、Illustrator 、InDesign、Coreldraw 等软件的运用，使学生掌握运用文字、图片排版编辑的技能，折页设计，单页设计流程，折页设计流程，画册设计流程<br />\r\n	<strong>7.书籍装帧设计课程</strong><br />\r\n	综合运用软件工具，瓶装书，精装书，杂志，书籍的圈套设计，包括书籍的基本构成，了解和掌握书籍封面设计、封套、环扉、扉页的不同设计方法以及正文排版规则。<br />\r\n	<strong>8.印刷工艺，印前，印中，印后技术</strong><br />\r\n	印刷工艺是判断一个平面设计师工作能力和经验的关键指标。通过系统的学习，可以使学生掌握，实际工作中送印的技巧与方式。印前，印中，印后工艺流程<br />\r\n	<strong>9.平面广告设计师工作流程</strong><br />\r\n	创意与设计的基本思路，不同设计门类所需的知识、工具和具体流程，通过对平面设计师工作流程的讲授，培养学员的设计流次序理念和良好的工作习惯。</p>\r\n<p>\r\n	<span style="color: #b22222"><span style="background-color: #fff"><strong>招生对象：<br />\r\n	&nbsp; 初中以上学历，有志于再设计行业发展，爱好图形图像艺术，喜欢奇思妙想者<br />\r\n	培养目标：<br />\r\n	&nbsp;面设计师专修班的课程本着全面，实用的原则，培养设计，印刷，制作和网站建设的复合型人才。<br />\r\n	就业领域：<br />\r\n	&nbsp;各种行业公司平面创意师，广告公司平面设计师，页面设计师</strong></span></span><br />\r\n	&nbsp;</p>\r\n');
INSERT INTO `course` VALUES (11, 1, '广告艺术传媒全科班', '本课程旨在培养全面型人才，注重经验培养。培养网页设计师、Flash设计师、平面广告设计师；培训学生独立制作开发能力，具有很强创意分析能力。', '&lt;p&gt;\r\n	&lt;span style=&quot;font-size: 72px&quot;&gt;dddddddddd&lt;/span&gt;&lt;/p&gt;\r\n');
INSERT INTO `course` VALUES (17, 2, 'PHP架构工程师', '掌握PHP框架及项目思想，能够独立完成中等规模网站项目。精通AJAX，XML等异步通讯技术技术，精通Apache和MySQL的管理和配置，熟悉MVC的开发框架。掌握网站开发的各种流程；了解各种Web相关技术的潮流和规范。熟悉WEB2.0开发，能够进行项目二次开发。', '<p>\r\n	要2434</p>\r\n');
INSERT INTO `course` VALUES (18, 2, 'PHP开发高级工程师', '能够在网站项目上有独到见解，对LINXU服务器的配置，安全服务管理很好的掌握.涉及大负载技术，云计算。并对技术有更好的追求，向高级软件架构师行业看齐。\r\n', '');
INSERT INTO `course` VALUES (21, 1, '网站美工设计专修班', '培养学生创意方法，设计方法，项目流程等网页 设计师应具备的岗位技能。\r\n使学院具有独立完成WEB站点设计的能力，完成后能从事网站美工设计，页面开发制作，界面设计             ', '<p>\r\n	<span style="color: #a52a2a"><span style="font-size: 16px"><strong>课程体系介绍</strong></span></span><br />\r\n	1.Photoshop<br />\r\n	&nbsp;学习图像处理、编辑、通道、图层、路径综合运用;图像色彩的校正；各种特效滤镜的使用;特效字的制作;图像输出与优化等,灵活运用图层风格，流体变形及褪底和蒙板，制作出千变万化的图像特效。<br />\r\n	2.reworks<br />\r\n	了解 Fireworks 基本工具的操作。文本编辑；矢量、位图工具的使用，动态滤镜,、混合模式与蒙板，切片和热点；元件、按钮、导航条与弹出菜单。学会使用 Fireworks 优化并导出网页，进行切割。<br />\r\n	3.FLASH<br />\r\n	掌握复选框、组合框、列表框、按钮、单选钮、滚动条、滚动窗格组件的创建方法；掌握自定义组件的颜色、修改组件的图形外观、使用组件创建表单。同时了解和学会使用 Action 语言行，执行代码。<br />\r\n	4HTML<br />\r\n	学习 HTML 的基本语法、修改常用的 HTML 标签<br />\r\n	5Dreamweaver<br />\r\n	掌握网页设计的基本工作流程，了解 Dreamweaver 在流程中的作用；掌握网页设计的基本原则，熟知建立网站并生成网页的基本流程，熟练应用<br />\r\n	6div+css<br />\r\n	学习附加外部样式表，链接方式和导入方式；新建样式，类、标签，新建样式表文件；详解使用 DIV+CSS 布局和 Web2.0 页面和网站布局的方法和流程。利用 Dreamweaver 实现网站布局，总揽全局<br />\r\n	熟悉W3C标准熟悉不同浏览器（IE/Firefox）之间的差异，写出的代码能够有很好的兼容性。<br />\r\n	页面的属性、边距、链接、标题；设置等段落样式；设置段落的列表样式；建立链接的多种设置方法；链接四种状态的颜色与下划线设置。详解表格并使用表格排版布局网站，掌握规范。 通过对经典站点的详尽解析，了解不同类型网络媒体的设计需求和内部逻辑关系。学习网站拓扑的设计规则，从而能够针对不同的设计主题，完成任何类型网络媒体整体结构设计，得心应手。<br />\r\n	7.Javascript<br />\r\n	运用语言程序的构成和编写；使用 Javascript 给页面添加动态交互事件；对表单本地数据验证，降低服务器的负荷；制作广告，页面漂浮图片等常用效果；为流行的 Ajax 技术提供支持，灵活运用。</p>\r\n<p>\r\n	<span style="color: #b22222"><span style="background-color: #fff"><strong>招生对象：<br />\r\n	&nbsp; 初中以上学历，有志于再设计行业发展，爱好图形图像艺术，喜欢奇思妙想者<br />\r\n	培养目标：<br />\r\n	&nbsp;面设计师专修班的课程本着全面，实用的原则，培养设计，印刷，制作和网站建设的复合型人才。<br />\r\n	就业领域：<br />\r\n	&nbsp;各种行业公司平面创意师，广告公司平面设计师，页面设计师</strong></span></span><br />\r\n	&nbsp;</p>\r\n');

-- --------------------------------------------------------

-- 
-- 表的结构 `enterprises`
-- 

CREATE TABLE `enterprises` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) default '1',
  `name` varchar(20) NOT NULL,
  `url` varchar(250) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=11 ;

-- 
-- 导出表中的数据 `enterprises`
-- 

INSERT INTO `enterprises` VALUES (1, 1, '中网天雨盛世文化传媒有限公司', 'http://www.zerun.com.cn');
INSERT INTO `enterprises` VALUES (4, 1, '北京盛唐联合科技有限公司', 'http://www.xswg.com');
INSERT INTO `enterprises` VALUES (5, 1, '中网启迪（北京）信息科技有限公司', 'http://www.zwqd.net');
INSERT INTO `enterprises` VALUES (6, 1, '中国营养联盟', 'http://www.yylm.org');
INSERT INTO `enterprises` VALUES (8, 1, '北京新网', 'http://www.xinnet.com');
INSERT INTO `enterprises` VALUES (9, 1, 'CC全球奢侈品精粹', 'http://www.ccluxy.com');
INSERT INTO `enterprises` VALUES (10, 1, '中国砂浆网', 'http://news.mortar.cn');

-- --------------------------------------------------------

-- 
-- 表的结构 `news`
-- 

CREATE TABLE `news` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) default '0',
  `title` varchar(50) default NULL,
  `time` date default NULL,
  `content` text,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=21 ;

-- 
-- 导出表中的数据 `news`
-- 

INSERT INTO `news` VALUES (7, 1, '大厦大厦大厦大', '2010-04-07', '<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>枯枯枯构的的顶</strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>替奇才村地查获</strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>模块管理&nbsp;</strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>系统帮助&nbsp; </strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>网站 信息&nbsp;</strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>&nbsp; 公司简介</strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>&nbsp; 开班信息&nbsp;&nbsp; </strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>eh新闻管理&nbsp;&nbsp; </strong></span></span></p>\r\n<p>\r\n	<span style="font-size: 28px"><span style="font-family: 楷体_gb2312"><strong>企业动太&nbsp; 行业新闻&nbsp; 文章管理&nbsp; 文章一&nbsp; 文二&nbsp; 文章三&nbsp;&nbsp; 广告管理&nbsp;&nbsp; 广告一&nbsp; 广告二&nbsp;&nbsp; 广告三&nbsp; 版权信息</strong></span></span></p>\r\n');
INSERT INTO `news` VALUES (12, 0, 'aaaaaaaaaa', NULL, 'ccccccccccccc');
INSERT INTO `news` VALUES (13, 0, 'bbbbbbbb', NULL, 'dddddddddddddasd');
INSERT INTO `news` VALUES (16, 0, 'aaaaaa', NULL, 'bbbbasd');
INSERT INTO `news` VALUES (20, 1, 'asdfasdf', '2010-04-21', '&lt;p&gt;\r\n	&lt;span style=&quot;font-size: 48px&quot;&gt;&lt;strong&gt;assadfsadfasdfasdfsadf&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;\r\n');

-- --------------------------------------------------------

-- 
-- 表的结构 `software`
-- 

CREATE TABLE `software` (
  `id` int(4) NOT NULL auto_increment,
  `tid` int(2) NOT NULL,
  `title` varchar(50) NOT NULL,
  `url` varchar(200) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=24 ;

-- 
-- 导出表中的数据 `software`
-- 

INSERT INTO `software` VALUES (10, 1, 'Photoshop CS2绿色版 v9.0', 'http://www.orsoon.com/Soft/893.html');
INSERT INTO `software` VALUES (11, 1, 'Macromedia Flash 8.0 简体版', 'http://www.onlinedown.net/softdown/9866_2.htm');
INSERT INTO `software` VALUES (12, 1, 'Macromedia Dreamweaver 8.0 简体版', 'http://www.onlinedown.net/soft/22017.htm#down');
INSERT INTO `software` VALUES (21, 1, 'CorelDRAW 12 [矢量绘图软件]', 'http://www.greendown.cn/soft/1610.html');
INSERT INTO `software` VALUES (22, 1, 'Illustrator CS3 [矢量绘图软件]', 'http://www.9553.com/soft/3713.htm#soft_down');
INSERT INTO `software` VALUES (17, 2, 'zend studio(PHP开发环境) ', 'http://www.zendstudio.net/zend-studio-all-in-one-download/');
INSERT INTO `software` VALUES (18, 2, 'Appserv V2.5.10', 'http://www.appservnetwork.com/');
INSERT INTO `software` VALUES (23, 2, 'PHPMyadmin V3.3.2 RC1 绿色多国语言免费版', 'http://down.48soft.com/view/11175.html');

-- --------------------------------------------------------

-- 
-- 表的结构 `student`
-- 

CREATE TABLE `student` (
  `id` int(11) NOT NULL auto_increment,
  `tid` int(2) NOT NULL,
  `name` varchar(10) default NULL,
  `education` varchar(5) default NULL,
  `company` varchar(20) default NULL,
  `postition` varchar(15) default NULL,
  `salary` int(10) NOT NULL,
  `img` varchar(100) default NULL,
  `about_com` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=46 ;

-- 
-- 导出表中的数据 `student`
-- 

INSERT INTO `student` VALUES (38, 1, '邹雨璁', '大专', '', '', 0, 'upLoad/images/student/stu7.gif', '');
INSERT INTO `student` VALUES (37, 1, '董世康', '大专', '', '', 0, 'upLoad/images/student/stu6.gif', '');
INSERT INTO `student` VALUES (36, 1, '李中康', '高中', '', '', 0, 'upLoad/images/student/stu5.gif', '');
INSERT INTO `student` VALUES (35, 1, '张丽飞', '本科', '', '', 0, 'upLoad/images/student/stu4.gif', '');
INSERT INTO `student` VALUES (34, 1, '张晓霞', '大专', '', '', 0, 'upLoad/images/student/stu3.gif', '');
INSERT INTO `student` VALUES (33, 1, '孙立波', '本科', '', '', 0, 'upLoad/images/student/stu2.gif', '');
INSERT INTO `student` VALUES (32, 1, '李小鹏', '大专', '', '', 0, 'upLoad/images/student/stu1.gif', '');
INSERT INTO `student` VALUES (39, 1, '王延昭', '高中', '', '', 0, 'upLoad/images/student/stu8.gif', '');
INSERT INTO `student` VALUES (40, 1, '赵希纯', '大专', '', '', 0, 'upLoad/images/student/stu9.gif', '');
INSERT INTO `student` VALUES (41, 1, '胡鑫', '本科', '', '', 0, 'upLoad/images/student/stu10.gif', '');
INSERT INTO `student` VALUES (42, 1, '王武勇', '本科', '', '', 0, 'upLoad/images/student/stu11.gif', '');
INSERT INTO `student` VALUES (43, 1, '裴曙光', '本科', '', '', 0, 'upLoad/images/student/stu12.gif', '');
INSERT INTO `student` VALUES (44, 1, '袁兴华', '本科', '', '', 0, 'upLoad/images/student/stu13.gif', '');
INSERT INTO `student` VALUES (45, 1, '郎静', '本科', '', '', 0, 'upLoad/images/student/stu14.gif', '');

-- --------------------------------------------------------

-- 
-- 表的结构 `studio`
-- 

CREATE TABLE `studio` (
  `id` int(2) NOT NULL,
  `tid` int(2) NOT NULL,
  `title` varchar(50) NOT NULL,
  `time` varchar(15) NOT NULL,
  `content` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- 
-- 导出表中的数据 `studio`
-- 

INSERT INTO `studio` VALUES (1, 0, '基基厅', '2010-04-15', '<p>\r\n	<span style="font-size: 26px"><strong>奇才械要基本原则</strong></span></p>\r\n');

-- --------------------------------------------------------

-- 
-- 表的结构 `tables`
-- 

CREATE TABLE `tables` (
  `tbid` int(3) NOT NULL auto_increment,
  `tbname` varchar(20) NOT NULL,
  `what` varchar(10) NOT NULL,
  PRIMARY KEY  (`tbid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=12 ;

-- 
-- 导出表中的数据 `tables`
-- 

INSERT INTO `tables` VALUES (1, 'article', '技术文章');
INSERT INTO `tables` VALUES (2, 'careers', '招聘信息');
INSERT INTO `tables` VALUES (3, 'classes', '开班信息');
INSERT INTO `tables` VALUES (4, 'course', '课程信息');
INSERT INTO `tables` VALUES (5, 'news', '新闻');
INSERT INTO `tables` VALUES (6, 'student', '就业学员');
INSERT INTO `tables` VALUES (7, 'works', '作品展示');
INSERT INTO `tables` VALUES (8, 'software', '软件下载');
INSERT INTO `tables` VALUES (9, 'teacher', '师资力量');
INSERT INTO `tables` VALUES (10, 'studio', '工作室');
INSERT INTO `tables` VALUES (11, 'enterprises', '签约企业');

-- --------------------------------------------------------

-- 
-- 表的结构 `teacher`
-- 

CREATE TABLE `teacher` (
  `id` int(5) NOT NULL auto_increment,
  `tid` int(2) default '1',
  `name` varchar(10) NOT NULL,
  `introduction` text NOT NULL,
  `say` text NOT NULL,
  `img` varchar(250) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8 ;

-- 
-- 导出表中的数据 `teacher`
-- 

INSERT INTO `teacher` VALUES (5, 1, '康老师', '毕业于大连交通大学 计算机应用与维护专业；曾经在教育软件公司担当技术总监一职，主要从事WINDOWS，LINUX教学任务。擅长activedirectory, EXCHANGE,LINUX服务，并有丰富的教学经验。\r\n', '态度决定一切！', 'upLoad/images/teacher/kang.gif');
INSERT INTO `teacher` VALUES (4, 1, '张老师', '毕业于清华大学,自动化管理专业，荣获双学位；国家信息工程监理工程师，清华万博资深CISCO产品专家，红旗LINUX产品专家，Microsoft产品专家；\r\n具有极其丰富的工程技术经验及大量的售前支持与工程经验,广东电力网络优化项目的技术负责人,为浙江公安厅ATM项目提供技术支持,雷达空军学院校园网工程建设等工程监理项目。\r\n', '毕业于清华大学,自动化管理专业，荣获双学位；国家信息工程监理工程师，清华万博资深CISCO产品专家，红旗LINUX产品专家，Microsoft产品专家；\r\n具有极其丰富的工程技术经验及大量的售前支持与工程经验,广东电力网络优化项目的技术负责人,为浙江公安厅ATM项目提供技术支持,雷达空军学院校园网工程建设等工程监理项目。\r\n', 'upLoad/images/teacher/zhangqiong.gif');
INSERT INTO `teacher` VALUES (6, 1, '李老师', '', '', 'upLoad/images/teacher/lizhiguang.gif');
INSERT INTO `teacher` VALUES (7, 1, '孙老师', '毕业于沈阳理工大学 信息工程专业，荣获学士学位；曾在沈阳凯安信通集团 做系统集成工程师，并持有证书：微软认证、华为认证以及教师资格证书。', '尽更大的努力，争取用更多的成就感充实自己\r\n', 'upLoad/images/teacher/sunjian.gif');

-- --------------------------------------------------------

-- 
-- 表的结构 `user`
-- 

CREATE TABLE `user` (
  `uid` int(1) NOT NULL auto_increment,
  `user` varchar(20) NOT NULL,
  `passwd` varchar(32) NOT NULL,
  PRIMARY KEY  (`uid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

-- 
-- 导出表中的数据 `user`
-- 

INSERT INTO `user` VALUES (1, 'aazzz00', '6d071901727aec1ba6d8e2497ef5b709');
INSERT INTO `user` VALUES (2, 'admin', '21232f297a57a5a743894a0e4a801fc3');

-- --------------------------------------------------------

-- 
-- 表的结构 `website_info`
-- 

CREATE TABLE `website_info` (
  `id` int(1) NOT NULL default '1',
  `website_name` varchar(50) NOT NULL default '',
  `website_copr` varchar(100) default NULL,
  `website_url` varchar(50) default NULL,
  `email` varchar(30) default NULL,
  `address` varchar(50) default NULL,
  `tel` varchar(15) default NULL,
  `mobile` int(11) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- 
-- 导出表中的数据 `website_info`
-- 

INSERT INTO `website_info` VALUES (1, '北京清华万博丰台区-网站前后台专业培训', '北京智搏网联技术培训有限公司 京ICP备08002051号', 'http://www.bjwanbo.com', 'bjwanbo@sina.com', '北京市丰台区西四环46号国润商务大厦B座8层', '010-83650488', 0);

-- --------------------------------------------------------

-- 
-- 表的结构 `works`
-- 

CREATE TABLE `works` (
  `id` int(4) NOT NULL auto_increment,
  `tid` int(2) NOT NULL,
  `name` varchar(10) NOT NULL,
  `introduction` text NOT NULL,
  `url` varchar(200) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8 ;

-- 
-- 导出表中的数据 `works`
-- 

INSERT INTO `works` VALUES (1, 1, '刘硕', '', 'upLoad/images/1.gif');
INSERT INTO `works` VALUES (3, 1, '张晶晶', '', 'upLoad/images/10.gif');
INSERT INTO `works` VALUES (4, 1, '刘志强', '', 'upLoad/images/13.gif');
INSERT INTO `works` VALUES (5, 1, '党丽', '', 'upLoad/images/9.gif');
INSERT INTO `works` VALUES (6, 1, '李静', '', 'upLoad/images/8.gif');
INSERT INTO `works` VALUES (7, 1, '孙丽云', '', 'upLoad/images/12.gif');
